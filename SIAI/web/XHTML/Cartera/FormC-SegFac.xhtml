<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Cuentas por Cobrar</title>        
    </h:head> 
    <h:body>
        <h:form id="FormCartera">        
            <center>
                <table border="0" cellspacing="3" cellpadding="3" style="width: 100%;">  
                    <tr>
                        <td>
                            <p:outputPanel >   
                                <table border="0" cellspacing="4" cellpadding="4" style="width: 100%;">
                                    <tr>
                                        <td >
                                            <p:outputPanel  autoUpdate="true">
                                                <b><big><font face="Arial" ><font face="Arial" >#{beanDireccionar.tituloMenu} »  Seguimiento a Factura</font>
                                                        </font></big></b></p:outputPanel>
                                        </td>
                                        <td style=" float:  right" >   
                                            <p:spacer width="80%" height="10x"/>
                                            <p:commandButton icon="ui-icon-arrowreturnthick-1-n" value="Cobro juridico"    style="font-size: 13px;font-family: Arial;"    update = ":contenedorGeneral:Contenedor:growl_General" action="#{MBCartera.GestionCartera('CobroJur')}" />
                                            <p:spacer width="20px"/>
                                            <p:commandButton icon="ui-icon-document" value="Nota credito"    style="font-size: 13px;font-family: Arial;"  action="#{MBCartera.GestionCartera('InfoNotacre')}"  ajax="true"  update=":contenedorGeneral:Contenedor:growl_General"/>
                                            <p:spacer width="20"/>
                                            <p:commandButton icon="ui-icon-scissors" value="Castigar Cartera"    style="font-size: 13px;font-family: Arial;"  update = ":contenedorGeneral:Contenedor:growl_General,PnlCastiga"  action="#{MBCartera.GestionCartera('CastigarCarte')}" />
                                            <p:spacer width="13"/>
                                        </td>
                                    </tr>
                                </table>               
                            </p:outputPanel>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="6"><p:separator /></td>
                    </tr>
                    <tr>
                        <td colspan="6">
                            <p:tabView  id="TabCart" dynamic="true" effect="fade" effectDuration="fast" cache="true" style="width: auto;font-family: Arial;font-size: 12px;border-radius: 5px;"  widgetVar="TabCartera" >
                                <!-- Informacion de observaciones --> 
                                <!-- Funcionando OK--> 
                                <!-- Informacion de la solicitud -->
                                <p:tab title="Observaciones">
                                    <br/>
                                    <br/>
                                    <center>
                                        <!--- Crear Tabla que permita visualizar la informacion de las facturas seleccionadas -->
                                        <table style="width:90%;font-family: Arial;font-size: 13px;position: relative;">
                                            <tr>
                                                <td><p:outputLabel value="» Detalle de observaciones por factura" style="font-size: 13px;font-family: Arial; font-weight: bold;"/></td>
                                            </tr>
                                            <tr><td>
                                                    <p:separator />
                                                </td></tr>
                                        </table>
                                    </center>
                                    <center>
                                        <p:outputPanel id="PanelObserv" autoUpdate="true">
                                            <!--Esto es para un solo avaluo  -->
                                            <table style="width: 1000px;font-family: Arial;font-size: 13px;position: relative;">            
                                                <tr>
                                                    <td>
                                                        <center>
                                                            <p:dataTable value="#{MBCartera.listaObservaciones}" var="Observ" 
                                                                         selection="#{MBCartera.observ}" selectionMode="single"   rowKey="#{Observ.codFactura}" 
                                                                         emptyMessage="No hay regristros de Seguimiento a Facturas"   
                                                                         style="font-family: Arial;font-size: 12px;width: 800px;">
                                                                <p:column headerText="N° Factura" style="font-family: Arial;font-size: 12px; width:40px;"  >
                                                                    <h:outputText value="#{Observ.codFactura}" />
                                                                </p:column>
                                                                <p:column headerText="Fecha" style="font-family: Arial;font-size: 12px; " >
                                                                    <h:outputText value="#{Observ.fechaObservacion}" />
                                                                </p:column>
                                                                <p:column headerText="Observacion" style="font-family: Arial;font-size: 12px; " >
                                                                    <h:outputText value="#{Observ.observacion}" />
                                                                </p:column>
                                                                <p:column headerText="Realizado Por" style="font-family: Arial;font-size: 12px;" >
                                                                    <h:outputText value="#{Observ.realizadoPor}" />
                                                                </p:column>
                                                                <p:column style="width:10px;text-align: center">
                                                                    <p:commandButton update=":contenedorGeneral:Contenedor:growl_General" action="#{MBCartera.GestionCartera('ListarObserv')}"  icon="ui-icon-search" title="Detalle observaciones a la factura" style="font-size: 13px;font-family: Arial;width: 15px; height: 15px;" >
                                                                        <f:setPropertyActionListener value="#{Observ}" target="#{MBCartera.observ}" />
                                                                    </p:commandButton>
                                                                </p:column>
                                                            </p:dataTable>
                                                        </center>
                                                    </td>
                                                </tr>
                                            </table> 
                                            <!--Fin para mostrar un solo avaluo -->
                                            <!-- Para Varios avaluos-->
                                            <!-- fin Varios Avaluos -->
                                            <br/>
                                        </p:outputPanel>
                                    </center>
                                </p:tab>
                                <p:tab title="Seguimiento">
                                    <!-- Arreglar la parte Grafica -->
                                    <p:outputPanel id="PnlSeg" autoUpdate="true">
                                        <br/>
                                        <br/>
                                        <center>
                                            <!--- Crear Tabla que permita visualizar la informacion de las facturas seleccionadas -->
                                            <table style="width:1000px;font-family: Arial;font-size: 13px;position: relative;">
                                                <tr>
                                                    <td><p:outputLabel value="» Persona a facturar" style="font-size: 13px;font-family: Arial; font-weight: bold;"/></td>
                                                </tr>
                                                <tr><td>
                                                        <p:separator />
                                                    </td></tr>
                                            </table>
                                            <center>
                                                <table cellspacing="3" cellpadding="3">
                                                    <tr>
                                                        <td>
                                                            <b><p:outputLabel  value="Identificación: " style="font-size: 12px;font-family: Arial;" /></b>                                                                                    
                                                        </td>
                                                        <td>
                                                            <p:outputLabel value="#{MBCartera.docCliente} #{MBCartera.nitEntidad}" style="font-size: 12px;font-family: Arial;" />                                                                                        
                                                        </td>
                                                        <td>
                                                            <b><p:outputLabel value="Nombre Completo: " style="font-size: 12px;font-family: Arial;" /></b>                                                                                      
                                                        </td>
                                                        <td>                                                                                        
                                                            <p:outputLabel value="#{MBCartera.nombEnt} #{MBCartera.nombreCliente}" style="font-size: 12px;font-family: Arial;" /> 
                                                        </td>
                                                        <td>
                                                            <b><p:outputLabel value="Telefono: " style="font-size: 12px;font-family: Arial;" /></b>                                                                       
                                                        </td>
                                                        <td>
                                                            <p:outputLabel value="#{MBCartera.telCliente} #{MBCartera.telEntidad}" style="font-size: 12px;font-family: Arial;" />                                                                                       
                                                        </td>  
                                                        <td>
                                                            <!-- ver informacion 1-->
                                                            <p:commandButton id="btnInfoCli1" icon="ui-icon-folder-open" style="width: 22px;" action="#{MBRadicacion.verCli(1)}"  styleClass="buttonC" 
                                                                             update=":DialogInfoAsesor:dialodinfocliente,:contenedorGeneral:Contenedor:growl_General"/>
                                                            <p:tooltip for="btnInfoCli1" value="Ver información del cliente" showEffect="clip" style="font-size: 12px;font-family: Arial;" />
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table style="width: 90%;font-family: Arial;font-size: 13px;position: relative;">
                                                    <tr>    
                                                        <td><p:outputLabel value="» Información Factura" style="font-weight: bold;"/></td>
                                                    </tr>
                                                    <tr><td>
                                                            <p:separator />
                                                        </td></tr>
                                                    <br/>
                                                </table>
                                                <h:panelGrid rendered="#{MBCartera.listaImpuestosFacturas.size() != 0}"> 
                                                    <p:dataTable  id="InfoFact" var="info"  value="#{MBCartera.listaImpuestosFacturas}" style=" width: 700px"  
                                                                  rowKey="#{info.codFactura}" selection="#{MBCartera.selectObserFact}" 
                                                                  emptyMessage="No se encuentras facturas en Impresion asociadas al cliente">
                                                        <p:column selectionMode="multiple" style="width:16px;text-align:center"/> 
                                                        <p:column headerText="N° Factura" style="font-family: Arial;font-size: 12px ;width:20px;" >
                                                            <h:outputText value="#{info.codFactura}" />
                                                        </p:column>
                                                        <p:column headerText="Valor a facturar"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                            <h:outputText value="#{info.valorFactura}" >
                                                                <f:convertNumber currencySymbol="$" type="currency"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Descuentos"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                            <h:outputText value="#{info.dscnto}" >
                                                                <f:convertNumber currencySymbol="$" type="currency"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Adicionales"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                            <h:outputText value="#{info.vladcConIvaFact}" >
                                                                <f:convertNumber currencySymbol="$" type="currency"/>
                                                            </h:outputText>
                                                        </p:column>
                                                    </p:dataTable> 
                                                </h:panelGrid>
                                            </center>
                                            <br/>
                                            <br/>
                                            <!-- Fin de la infoacion de facturas seleccionadas -->
                                            <table style="width: 90%;font-family: Arial;font-size: 13px;position: relative;">
                                                <tr>    
                                                    <td><p:outputLabel value="» Informacion General Facturas " style="font-weight: bold;"/></td>
                                                </tr>
                                                <tr><td>
                                                        <p:separator />
                                                    </td></tr>
                                                <br/>
                                            </table>
                                            <table cellpadding="2" cellspacing="2">

                                                <tr> 
                                                    <td><b><p:outputLabel   value="Valor a Facturar: " style=" font-size: 12px;font-family: Arial;"/></b></td>
                                                    <td><p:outputLabel   value="#{MBCartera.valorFactura}" style= "float: right; font-size: 12px;font-family: Arial;">
                                                            <f:convertNumber locale="en_US"/></p:outputLabel>
                                                    </td>
                                                </tr>
                                                <c:choose>
                                                    <c:when test="#{MBCartera.iva != 0}">
                                                        <tr>
                                                            <td><b><p:outputLabel value="Iva: " style=" font-size: 12px;font-family: Arial;"/></b></td>
                                                            <td><p:outputLabel   value="#{MBCartera.iva}" style= "float: right; font-size: 12px;font-family: Arial;">
                                                                    <f:convertNumber locale="en_US"/></p:outputLabel>
                                                            </td>
                                                        </tr>
                                                    </c:when>
                                                </c:choose>

                                                <tr> 
                                                    <td><b><p:outputLabel   value="Abonos: " style=" font-size: 12px;font-family: Arial;"/></b></td>
                                                    <td><p:outputLabel   value="#{MBCartera.valorAbono}" style="float: right; font-size: 12px;font-family: Arial;">
                                                            <f:convertNumber locale="en_US"/></p:outputLabel>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><b><p:outputLabel   value="Notas credito:" style= "font-size: 12px;font-family: Arial;"/></b></td>
                                                    <td><p:outputLabel   value="#{MBCartera.valorNotaCre}" style="float: right; font-size: 12px;font-family: Arial;">
                                                            <f:convertNumber locale="en_US"/></p:outputLabel>
                                                    </td>
                                                </tr>
                                                <tr> 
                                                    <td><b><p:outputLabel   value="Saldo a Pagar " style=" font-size: 12px;font-family: Arial;"/></b></td>
                                                    <td><p:outputLabel   value="#{MBCartera.tpagar}" style="float: right; font-size: 12px;font-family: Arial;">
                                                            <f:convertNumber locale="en_US"/></p:outputLabel>
                                                    </td>
                                                </tr>
                                            </table>
                                        </center>
                                        <br/>

                                        <center>
                                            <table border="0" cellpadding="4" cellspacing="4">
                                                <tr>
                                                    <td>
                                                        <b><p:outputLabel  value="Observación: " style="font-size: 12px;font-family: Arial;"/></b>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td>
                                                        <p:inputTextarea value="#{MBCartera.observCobro}" style="font-size: 12px;font-family: Arial;width: 600px;height: 50px;text-transform: uppercase;" placeholder="Ingrese observaciones"   />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p:spacer  height="10"/>
                                                    </td>
                                                </tr>
                                            </table> 
                                            <table>
                                                <tr>
                                                    <td>
                                                        <center>
                                                            <p:commandButton value="Grabar" icon="ui-icon-disk"    action="#{MBCartera.GestionCartera('ObservCobro')}" ajax="true"
                                                                             update=":contenedorGeneral:Contenedor:growl_General,PanelObserv,PnlSeg" style="font-size: 13px;"    >
                                                            </p:commandButton></center>
                                                    </td>
                                                </tr>
                                            </table>
                                        </center>
                                    </p:outputPanel>
                                </p:tab>
                                <p:tab  title="Pago"  >
                                    <p:outputPanel id="PnlPago" autoUpdate="true">
                                        <center>
                                            <br/>
                                            <br/>
                                            <center>
                                                <!--- Crear Tabla que permita visualizar la informacion de las facturas seleccionadas -->
                                                <table style="width:1000px; font-family: Arial;font-size: 13px;position: relative;">
                                                    <tr>
                                                        <td><p:outputLabel value="» Persona a facturar" style="font-size: 13px;font-family: Arial; font-weight: bold;"/></td>
                                                    </tr>
                                                    <tr><td>
                                                            <p:separator />
                                                        </td></tr>
                                                </table>
                                                <center>
                                                    <table cellspacing="3" cellpadding="3">
                                                        <tr>
                                                            <td>
                                                                <b><p:outputLabel  value="Identificación: " style="font-size: 12px;font-family: Arial;" /></b>                                                                                    
                                                            </td>
                                                            <td>
                                                                <p:outputLabel value="#{MBCartera.docCliente} #{MBCartera.nitEntidad}" style="font-size: 12px;font-family: Arial;" />                                                                                        
                                                            </td>
                                                            <td>
                                                                <b><p:outputLabel value="Nombre Completo: " style="font-size: 12px;font-family: Arial;" /></b>                                                                                      
                                                            </td>
                                                            <td>                                                                                        
                                                                <p:outputLabel value="#{MBCartera.nombEnt} #{MBCartera.nombreCliente}" style="font-size: 12px;font-family: Arial;" /> 
                                                            </td>
                                                            <td>
                                                                <b><p:outputLabel value="Telefono: " style="font-size: 12px;font-family: Arial;" /></b>                                                                       
                                                            </td>
                                                            <td>
                                                                <p:outputLabel value="#{MBCartera.telCliente} #{MBCartera.telEntidad}" style="font-size: 12px;font-family: Arial;" />                                                                                       
                                                            </td>                                                                              
                                                        </tr>
                                                    </table>
                                                </center>
                                            </center>
                                            <!-- 
                                            <table style="width: 90%;font-family: Arial;font-size: 13px;position: relative;">
                                                <tr>    
                                                    <td><p:outputLabel value="» Información general factura" style="font-weight: bold;"/></td>
                                                </tr>
                                                <tr><td>
                                                        <p:separator />
                                                    </td></tr>
                                                <br/>
                                            </table>
                                            <h:panelGrid rendered="#{MBCartera.listaImpuestosFacturas.size() != 0}"> 
                                                <p:dataTable  id="InfoFactura" var="infoValores"  value="#{MBCartera.listaImpuestosFacturas}" style=" width: 700px"  
                                                              rowKey="#{infoValores.codFactura}" 
                                                              emptyMessage="No se encuentras facturas en Impresion asociadas al cliente">
                                                    <p:column headerText="Factura" style="font-family: Arial;font-size: 12px ;width:20px;" >
                                                        <h:outputText value="#{infoValores.codFactura}" />
                                                    </p:column>
                                                    <p:column headerText="Valor a facturar"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                        <h:outputText value="#{infoValores.valorFactura}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Descuentos"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                        <h:outputText value="#{infoValores.dscnto}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Adicionales"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                        <h:outputText value="#{infoValores.vladcConIvaFact}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Nota Credito"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                        <h:outputText value="#{infoValores.notasCredito}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Adicionales Avaluo "  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                        <h:outputText value="#{infoValores.vladcConIvaAval}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Adicionales Factura "  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                        <h:outputText value="#{infoValores.vladcConIvaFact}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Anticipo"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                        <h:outputText value="#{infoValores.antcp}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                </p:dataTable> 
                                            </h:panelGrid>
                                            -->
                                            <p:spacer height="15px"/>
                                            <!--Informacion de Detalle por avaluo -->
                                            <p:spacer height="15px"/>
                                            <br/>
                                            <p:outputPanel autoUpdate="true">
                                                <!-- INFORMACION SOBRE LOS DETALLES POR AVALUO -->
                                                <p:outputPanel id="InfoAvaluo">
                                                    <table style="width: 90%;font-family: Arial;font-size: 13px;position: relative;">
                                                        <tr>    
                                                            <td><p:outputLabel value="» Detalle por Avaluo" style="font-weight: bold;" rendered="#{MBCartera.listaInfoAvaluos.size() != 0}"/></td>
                                                        </tr>
                                                        <tr><td>
                                                                <p:separator rendered="#{MBCartera.listaInfoAvaluos.size() != 0}" />
                                                            </td></tr>
                                                        <br/>
                                                    </table>
                                                    <h:panelGrid rendered="#{MBCartera.listaInfoAvaluos.size() != 0}"> 
                                                        <p:dataTable  id="InfoAvalFactura" var="InfoAvalFact"  value="#{MBCartera.listaInfoAvaluos}" style=" width: 650px"  
                                                                      rowKey="#{InfoAvalFact.codAval}"  selection="#{MBCartera.dtlleAval}" selectionMode="single"
                                                                      emptyMessage="No se encuentras facturas en Impresion asociadas al cliente">
                                                            <p:ajax event="rowSelect" listener="#{MBCartera.onRowSelect2}" update=":contenedorGeneral:Contenedor:growl_General" />
                                                            <p:column  headerText="Impuestos"  style="font-family: Arial;font-size: 12px ;width: 10px;  " rendered="false">
                                                                <p:commandButton update=":contenedorGeneral:Contenedor:growl_General" action="#{MBCartera.impuestoporAval()}"    icon="ui-icon-search" title="Detalle de Impuestos" style="font-size: 13px;font-family: Arial;width: 15px; height: 15px;" >
                                                                    <f:setPropertyActionListener value="#{InfoAvalFact}" target="#{MBCartera.observCobro}" />
                                                                </p:commandButton>
                                                            </p:column>
                                                            <p:column headerText="Factura" style="font-family: Arial;font-size: 12px ;width:25px;" >
                                                                <h:outputText value="#{InfoAvalFact.codFactura}" />
                                                            </p:column>
                                                            <p:column headerText="Avaluo" style="font-family: Arial;font-size: 12px ;width:20px;" >
                                                                <h:outputText value="#{InfoAvalFact.codAval}" />
                                                            </p:column>
                                                            <p:column headerText="Ciudad" style="font-family: Arial;font-size: 12px ;width:50px;" >
                                                                <h:outputText value="#{InfoAvalFact.ciudadAval}" />
                                                            </p:column>
                                                            <p:column headerText="Valor a facturar"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                                <h:outputText value="#{InfoAvalFact.valorFactura}" >
                                                                    <f:convertNumber currencySymbol="$" type="currency"/>
                                                                </h:outputText>
                                                            </p:column>
                                                            <p:column headerText="Subtotal"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                                <h:outputText value="#{InfoAvalFact.subtotal}" >
                                                                    <f:convertNumber currencySymbol="$" type="currency"/>
                                                                </h:outputText>
                                                            </p:column>
                                                            <p:column headerText="Impuesto" style="font-family: Arial;font-size: 12px ;width:30px;" >
                                                                <h:outputText value="#{InfoAvalFact.nombreImpuesto}" />
                                                            </p:column>
                                                            <p:column headerText="Total Ica"  style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                                <h:outputText value="#{InfoAvalFact.rteIca}" >
                                                                    <f:convertNumber currencySymbol="$" type="currency"/>
                                                                </h:outputText>
                                                            </p:column>
                                                        </p:dataTable> 
                                                    </h:panelGrid>
                                                </p:outputPanel>
                                            </p:outputPanel>
                                            <!-- Informacion Descuentos -->

                                            <p:outputPanel id="ModImps" autoUpdate="true">
                                                <table style="width:90%;font-family: Arial;font-size: 13px;position: relative;">
                                                    <tr><td><p:outputLabel value="» Aplicacion de Impuestos - (Calculo de pago en efectivo)" style="font-weight: bold;"/></td> </tr>
                                                    <tr><td><p:separator /></td></tr><br/>
                                                </table>
                                                <table style="font-family: Arial;font-size: 13px; " >             
                                                    <tr> 
                                                        <td colspan="2">
                                                            <p:commandButton  id="CmbImps" icon="ui-icon-gear"     action="#{MBCartera.GestionCartera('CambioImpuestos')}" 
                                                                              update=":contenedorGeneral:Contenedor:growl_General" style="float: right ;font-size: 12px;font-family: Arial;" ajax="true" >
                                                            </p:commandButton>
                                                            <p:tooltip for="CmbImps" value="Modificacion de Impuestos " showEffect="clip" style="font-size: 12px;font-family: Arial;" rendered="#{MBCartera.selectPendiXCobrar.size()>0}" />

                                                        </td>
                                                        <td colspan="2">
                                                            <p:commandButton  id="CambioIca" icon="ui-icon-refresh"   action="#{MBCartera.FactGrupoInfo('CambioIca')}"  rendered="#{MBCartera.iva!=0}"
                                                                              update=":contenedorGeneral:Contenedor:growl_General" style="float: right ;font-size: 12px;font-family: Arial;" ajax="true" >
                                                            </p:commandButton>
                                                            <p:tooltip for="CambioIca" value="Cambio Ica"  showEffect="clip" style="font-size: 12px;font-family: Arial;" rendered="#{MBCartera.selectPendiXCobrar.size()>0}" />
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td><b><p:outputLabel  value="Tipo de pago: " style="font-weight: bold;"  /></b> </td>
                                                        <td><p:selectOneMenu   id="TipoPago" style="width:130px;font-size: 12px;float: right;" value="#{MBCartera.codTipoPago}">
                                                                <p:ajax listener="#{MBCartera.CambioImpuesto('DebitoCredito')}"   update=":contenedorGeneral:Contenedor:growl_General,PnlPago,ModImps" />
                                                                <f:selectItem id="idPago" itemValue="0"  itemLabel="Seleccione Tipo Pago" noSelectionOption="true"/>
                                                                <f:selectItems id="selTipoPago"  value="#{MBCartera.cargarTipoPago}" />
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="4"><p:separator /></td>
                                                    </tr>

                                                    <tr>
                                                        <td><p:outputLabel value="Valor a facturar " style="font-weight: bold;"/></td>
                                                        <td><p:outputLabel style="float: right;" value="#{MBCartera.valorFactura}"><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                    </tr>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.vladcConIvaAval>0   }" >
                                                            <tr>
                                                                <td><p:outputLabel   value="Adicional avaluo" style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel style="float: right;" value="#{MBCartera.vladcConIvaAval}">
                                                                        <f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.vladcConIvaFact>0}" >
                                                            <tr>
                                                                <td><p:outputLabel   value="Adicional factura" style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel  style="float: right;" value="#{MBCartera.vladcConIvaFact}">
                                                                        <f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.totalDescFactAval > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel value="Descuento " style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel   style="float: right;" value="#{MBCartera.totalDescFactAval}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.dscuento > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel value="Nota Credito " style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel   style="float: right;" value="#{MBCartera.dscuento}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                                <td colspan="2">
                                                                    <p:commandButton  id="verNotaCred"   style="width: 18px; height: 16px;"   action="#{MBCartera.GestionCartera('FactNotaCre')}"    update=":contenedorGeneral:Contenedor:growl_General" rendered="#{MBCartera.listNotaCre.size()>0}" 
                                                                                      icon="ui-icon-search"  />
                                                                    <p:tooltip for="verNotaCred" value="Ver las Notas credito asociadas a la factura" showEffect="clip" style="font-size: 12px;font-family: Arial;" rendered="#{MBCartera.listNotaCre.size()>0}" />
                                                                </td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBFacturacion.sumaFacAnt > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel value="Anticipos facturados:" style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel  style="float: right;" value="#{MBFacturacion.sumaFacAnt}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>    
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.notasCredito > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel value="Nota Credito " style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel   style="float: right;" value="#{MBCartera.notasCredito}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                                <td colspan="2">
                                                                    <p:commandButton  id="verNotaCred"   style="width: 18px; height: 16px;"   action="#{MBCartera.GestionCartera('FactNotaCre')}"    update=":contenedorGeneral:Contenedor:growl_General" rendered="#{MBCartera.listNotaCre.size()>0}" 
                                                                                      icon="ui-icon-search"  />
                                                                    <p:tooltip for="verNotaCred" value="Ver las Notas credito asociadas a la factura" showEffect="clip" style="font-size: 12px;font-family: Arial;" rendered="#{MBCartera.listNotaCre.size()>0}" />
                                                                </td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <tr>
                                                        <td colspan="4"><p:separator /></td>
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel value="Subtotal" style="font-weight: bold;"/></td>
                                                        <td><p:outputLabel style="float: right;" value="#{MBCartera.subtotal}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel value="Iva #{MBCartera.lblliva}"   rendered="#{MBCartera.iva > 0}" style="font-weight: bold;"/></td>
                                                        <td><p:outputLabel  rendered="#{MBCartera.iva > 0}" style="float: right;" value="#{MBCartera.iva}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                    </tr>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.fuente > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel  value="Retefuente #{MBCartera.lblfuente}"  style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel  style="float: right;" value="#{MBCartera.fuente}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>                              
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.ica > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel  value="ReteIca #{MBCartera.lblica}"  style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel  style="float: right;" value="#{MBCartera.ica}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.icaAvaltmp > 0 and MBCartera.estIcaAval==true}" >
                                                            <tr>
                                                                <td><p:outputLabel value="ReteIca  #{MBCartera.lblIcaAvaltmp}"   style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel  style="float: right;" value="#{MBCartera.icaAvaltmp}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.reteIva > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel value="ReteIva #{MBCartera.lblreteIva}"  style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel  style="float: right;" value="#{MBCartera.reteIva}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <tr>
                                                        <td colspan="4"><p:separator /></td>
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel value="Total" style="font-weight: bold;"/></td>
                                                        <td><p:outputLabel style="float: right;" value="#{MBCartera.tpagar}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                    </tr>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.vladcSinIvaAval > 0 or MBCartera.vladcSinIvaFact > 0}" >
                                                            <tr>
                                                                <td colspan="4"><p:separator /></td>
                                                            </tr>
                                                            <tr>
                                                                <td><p:outputLabel value="Sin iva " style=" font-size: 10px;"/></td>           
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.vladcSinIvaAval > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel  value="Adicional factura " style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel style="float: right;"    value="#{MBCartera.vladcSinIvaAval}" >
                                                                        <f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBCartera.vladcSinIvaFact > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel  value="Adicional avaluo " style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel  style="float: right;"    value="#{MBCartera.vladcSinIvaFact}" >
                                                                        <f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <c:choose>
                                                        <c:when test="#{MBFacturacion.valorDescuentos > 0}" >
                                                            <tr>
                                                                <td><p:outputLabel value="Descuento #{MBCartera.tipoAjuste} " style="font-weight: bold;"/></td>
                                                                <td><p:outputLabel   style="float: right;" value="#{MBCartera.dscuento}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                            </tr>
                                                        </c:when>
                                                    </c:choose>
                                                    <tr>
                                                        <td colspan="4"><p:separator /></td>
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel  value="Abonos" style="font-weight: bold;"/></td>
                                                        <td><p:outputLabel  style="float: right;font-size: 14px" value="#{MBCartera.abonos}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                        <td colspan="2"><p:commandButton  id="VerAbono"   style="width: 18px; height: 16px;"    action="#{MBCartera.GestionCartera('Abonos')}"    update=":contenedorGeneral:Contenedor:growl_General" rendered="#{MBCartera.listNotaAbonos.size()>0}"
                                                                                          icon="ui-icon-search"  />
                                                            <p:tooltip for="VerAbono" value="Ver abonos asociadas a la factura" showEffect="clip" style="font-size: 12px;font-family: Arial;" rendered="#{MBCartera.listNotaAbonos.size()>0}" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="4"><p:separator /></td>
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel  value="Anticipo" style="font-weight: bold;"/></td>
                                                        <td><p:outputLabel  style="float: right;font-size: 14px" value="#{MBCartera.antcp}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="4"><p:separator /></td>
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel  value="Saldo a pagar:" style="font-weight: bold;"/></td>
                                                        <td><p:outputLabel  style="float: right;font-size: 14px" value="#{MBCartera.pendtPorPagar}" ><f:convertNumber  locale="en_US" /></p:outputLabel></td>
                                                    </tr>
                                                </table>

                                                <br/>
                                                <br/>
                                            </p:outputPanel>
                                            <br/>
                                        </center>
                                    </p:outputPanel>
                                    <p:outputPanel id="PnlRegpago">
                                        <table   style="width:90%;font-family: Arial;font-size: 13px;position: relative;">
                                            <tr>    
                                                <td><p:outputLabel value="» Registrar Pago" style="font-weight: bold;"/></td>
                                            </tr>
                                            <tr><td>
                                                    <p:separator />
                                                </td></tr>
                                        </table>
                                        <center>
                                            <table style="font-family: Arial;font-size: 13px;float: bottom; width: 90%">
                                                <tr>
                                                    <td colspan="2" >
                                                        <b><p:outputLabel   value="Ultima fecha de consigancion: " style="font-size: 13px;font-family: Arial; float: left; align-content: center; color: red;}"/></b>
                                                        <p:outputLabel id="fechaConsig"  value="#{MBCartera.fechaConsig}" style="font-size: 12px;font-family: Arial; width: 100px;  float: left"/>
                                                    </td>
                                                </tr>
                                            </table>
                                            <center>
                                                <table style="font-family: Arial;font-size: 13px; ">
                                                    <tr> 
                                                        <td><b><p:outputLabel  value="Recibo: " style="font-size: 12px;font-family: Arial;" /></b></td>  
                                                        <td style="width: 20px">
                                                            <p:selectOneMenu   id="ica" style="width:170px;font-size: 12px;" value="#{MBCartera.codRecibo}" >
                                                                <p:ajax listener="#{MBCartera.consRecibo()}" update="fechaConsig,NoRecibo"/>
                                                                <f:selectItem id="ic" itemValue="0" itemLabel="Seleccione Recibo..." noSelectionOption="true"/>
                                                                <f:selectItems id="selIc"  value="#{MBCartera.cargarRecibo}" />
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                    <tr> 
                                                        <td>
                                                            <b><p:outputLabel  value="N°  Recibo  :  "  style="font-size: 12px;font-family: Arial;"  /></b>
                                                        </td>
                                                        <td>
                                                            <p:outputPanel autoUpdate="true">
                                                                <p:inputText id="NoRecibo"  pt:placeholder="No Recibo"  value="#{MBCartera.nombre}" style="font-size: 12px;font-family: Arial;" disabled="true" onkeyup="formatoNum(this)" onkeypress="return validarnumeros(event);" >
                                                                    <f:convertNumber locale="en_US"/>
                                                                </p:inputText>
                                                            </p:outputPanel>
                                                        </td>
                                                    </tr>
                                                    <tr> 
                                                        <td><b><p:outputLabel  value="Valor:"  style="font-size: 12px;font-family: Arial;"/></b> </td>
                                                        <td>
                                                            <p:outputPanel autoUpdate="true" >
                                                                <p:inputText id="ValorCancel" pt:placeholder="Abono" value="#{MBCartera.abono}" disabled="true"
                                                                             style="font-size: 12px;font-family: Arial;" onkeyup="formatoNum(this)" onkeypress="return validarnumeros(event);" > 
                                                                    <f:convertNumber locale="en_US"/>
                                                                </p:inputText> 
                                                            </p:outputPanel>
                                                        </td>
                                                        <td>
                                                            <p:commandButton icon="ui-icon-plus"  actionListener ="#{MBCartera.ajusteValor()}"    
                                                                             update=":contenedorGeneral:Contenedor:growl_General,AlertPago2"  style="width: 22px;" ajax="true" >
                                                            </p:commandButton>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td  style="width: 10px"><b><p:outputLabel   value="Banco: " style="font-size: 12px;font-family: Arial;"/></b></td>
                                                        <td colspan="1">
                                                            <p:selectOneMenu   id="banco" style="width:170px;font-size: 12px;" value="#{MBCartera.codBanco}">
                                                                <f:selectItem id="selBanco" itemValue="0" itemLabel="Seleccione banco..." noSelectionOption="true"/>
                                                                <f:selectItems id="selBan"  value="#{MBCartera.cargarBancos}" />
                                                            </p:selectOneMenu>  
                                                        </td>
                                                    </tr>
                                                    <td colspan="1" style="width: 10px">
                                                        <b><p:outputLabel   value="Consigno: " style="font-size: 12px;font-family: Arial; width: 100px"/></b>
                                                    </td>
                                                    <td colspan="1">
                                                        <p:calendar id="f" style="font-size: 12px;font-family: Arial;" value="#{MBCartera.fechaPagos}" pt:placeholder="AAAA/MM/DD" locale="es" maxdate="2050-01-01"
                                                                    mindate="#{MBSeguimiento.fecha_actual}"  pattern="yyyy-MM-dd" mask="true"  >
                                                        </p:calendar>
                                                    </td>
                                                </table>
                                            </center>
                                            <br/>
                                            <table>
                                                <tr>
                                                    <td>
                                                        <p:commandButton icon="ui-icon-cart" value="Aceptar"  style="font-size: 13px;font-family: Arial;" actionListener="#{MBCartera.validarPago()}"  ajax="true"  action="#{beanDireccionar.url_Menu_Cartera('MayorMenorValor')}"
                                                                         update=":contenedorGeneral:Contenedor:growl_General,RptPago"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </center>
                                    </p:outputPanel>

                                    <!-- Alerta de exceso de Pago  -->
                                    <p:outputPanel id="AlertPago2" >
                                        <p:dialog header="Alerta realizar pago" widgetVar="AlertPago"  resizable="true" closable="false" modal="false" height="221px" width="423px" showEffect="fade" hideEffect="fade" style="font-size: 12px;font-family: Arial">
                                            <center>
                                                <table border="0" >          
                                                    <p:spacer width="15px" />
                                                    <tr>
                                                        <td><p:outputLabel style="font-size: 14px;font-family: Arial;" value="Realice el ajuste de mayor o menor valor a cancelar ."/></td>
                                                    </tr> 
                                                </table>
                                                <center>
                                                    <p:spacer height="10px" ></p:spacer>
                                                    <table>
                                                        <tr>
                                                            <td >
                                                                <b><h:outputText value="Valor:"  style="font-family: Arial;font-size: 12px; " /></b>
                                                            </td>
                                                            <td >
                                                                <p:inputText id="mayorValor1"  value="#{MBCartera.mayorValor}" 
                                                                             style="font-size: 12px;font-family: Arial;width:150px"  onkeypress="return validarnumeros(event);" placeholder="Mayor valor"  onkeyup="formatoNum(this)">
                                                                    <p:ajax event="keyup" update="out1" />
                                                                    <f:convertNumber locale="en_US"/>
                                                                </p:inputText>
                                                                <h:outputText id="out1" value="#{MBCartera.mayorValor}" rendered="false" />
                                                            </td>
                                                            <td>
                                                                <p:selectBooleanCheckbox   value="#{MBCartera.radioUno}"  style="font-weight: bold;">
                                                                    <p:ajax event="change"  update="PnlFavorMayor"  />
                                                                </p:selectBooleanCheckbox>
                                                                <td>
                                                                    <b><p:outputLabel style="font-size: 12px;font-family: Arial;" value="Saldo a favor"/></b>
                                                                </td>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </center>
                                                <p:outputPanel id="PnlFavorMayor" >
                                                    <table>
                                                        <p:spacer width="10px"/>
                                                        <tr>
                                                            <td >
                                                                <p:inputTextarea  style="font-size: 12px;font-family: Arial;width: 300px;height: 60px;" value="#{MBCartera.observMayorValor}" placeholder="Ingrese observaciones"   />
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <table cellspacing="3" cellpadding="3">
                                                        <tr>                           
                                                            <td><p:commandButton value="Aceptar" icon="ui-icon-check" styleClass="ui-confirmdialog-yes" ajax="true" 
                                                                                 actionListener="#{MBCartera.RegstVariasFcat('Aceptar')}"   
                                                                                 update="AlertPago2,ValorCancel"  style="font-family:Arial;font-size: 13px;" /></td>
                                                            <td> <p:commandButton value="Cancelar" icon="ui-icon-close" styleClass="ui-confirmdialog-no" update="AlertPago2" process="@this"
                                                                                  actionListener="#{MBCartera.reset}"  
                                                                                  ajax="true" style="font-family:Arial;font-size: 13px;" /></td>
                                                        </tr>
                                                    </table>
                                                </p:outputPanel>
                                            </center>
                                        </p:dialog>
                                    </p:outputPanel>

                                    <!-- Reparticion de Pago para varias Facturas !-->
                                    <p:dialog widgetVar="Pnl" header="Distribucion de Pago" minHeight="100" resizable="true"  closable="true"
                                              width="486px" height="314px" >
                                        <p:outputPanel id ="RptPago">
                                            <table style="font-family: Arial;font-size: 12px;">
                                                <!-- Informacion de Avaluos Seleccionados -->
                                                <tr>
                                                    <td colspan="5">
                                                        <br/>
                                                        <center><p:outputLabel value="Realice la distribucion de pago, cambiando en el cuadro de consulta el tipo de ajuste y su respectivo valor." style=" font-family: Arial;font-size: 12px ;  "/></center></td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <h:panelGrid columns="2" cellpadding="5" style="font-size: 12px;font-family: Arial;" >
                                                            <p:outputLabel for="TipoAjuste" value="Tipo de Ajuste" />
                                                            <p:selectOneRadio id="TipoAjuste" value="#{MBCartera.tipoAjuste}">
                                                                <f:selectItem itemLabel="Porcentaje" itemValue="1" />
                                                                <f:selectItem itemLabel="Valor Fijo" itemValue="2" />
                                                            </p:selectOneRadio>
                                                        </h:panelGrid>
                                                    </td> 
                                                </tr>

                                                <tr>    
                                                    <center>
                                                        <td>
                                                            <b><p:outputLabel   value="Total valor consignado:" style="font-size: 12px;font-family: Arial; float:right" rendered="#{MBCartera.dscuento!=0}" /></b>
                                                        </td>
                                                        <td>
                                                            <p:outputLabel value="#{MBCartera.valorConsig}"  style="font-weight: bold; font-size:12px ; float:right">
                                                                <f:convertNumber locale="en_US"/>
                                                            </p:outputLabel>
                                                        </td>
                                                    </center>
                                                </tr>
                                            </table>
                                        </p:outputPanel>
                                        <table>
                                            <tr>
                                                <td>
                                                    <center>
                                                        <h:panelGrid rendered="#{MBCartera.listaReprtFact.size() != 0}" > 
                                                            <p:dataTable id="cars2" var="Rpsrt" value="#{MBCartera.listaReprtFact}" scrollable="true" scrollHeight="100" style="width: 450px;" editable="true" editMode="cell" widgetVar="cellCars" >
                                                                <p:column headerText="Factura" style="font-family: Arial;font-size: 12px ;width:5px;" >
                                                                    <h:outputText value="#{Rpsrt.codFactura}" />
                                                                </p:column>
                                                                <p:column headerText="Saldo a Pagar"  style="font-family: Arial;font-size: 12px ;width: 50px;" >
                                                                    <h:outputText value="#{Rpsrt.totalPagar}" >
                                                                        <f:convertNumber currencySymbol="$" type="currency"/>
                                                                    </h:outputText>
                                                                </p:column>
                                                                <p:column headerText="Valor ajuste" style="font-family: Arial;font-size: 12px ;width: 40px;">
                                                                    <p:cellEditor>
                                                                        <f:facet name="output"><h:outputText value="#{Rpsrt.totalAjuste}" style="font-family: Arial;font-size: 12px ;width: 40px;" >
                                                                                <f:convertNumber currencySymbol="$" type="currency"/>
                                                                            </h:outputText>
                                                                        </f:facet>
                                                                        <f:facet name="input"><p:inputText value="#{Rpsrt.totalAjuste}" style="width:95px" label="Valor ajuste"/></f:facet>
                                                                    </p:cellEditor>
                                                                </p:column>
                                                            </p:dataTable>
                                                        </h:panelGrid>
                                                    </center>
                                                </td>
                                            </tr>
                                            <tr>    
                                                <center>
                                                    <td>
                                                        <b><p:outputLabel   value="Total Valor:" style="font-size: 12px;font-family: Arial; float:right"  /></b>
                                                    </td>
                                                    <td>
                                                        <p:outputLabel value="#{MBCartera.valorAjuste}"  style="font-weight: bold; font-size:12px ; float:right">
                                                            <f:convertNumber locale="en_US"/>
                                                        </p:outputLabel>
                                                    </td>
                                                </center>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <center>
                                                        <p:commandButton icon="ui-icon-cart" value="Aceptar"  style="font-size: 13px;font-family: Arial;" actionListener="#{MBCartera.GestionCartera('AceptarInsertPago')}"    ajax="true" action="#{beanDireccionar.url_Menu_Cartera('SeguimientoFactura')}"
                                                                         update=":contenedorGeneral:Contenedor:growl_General"/>
                                                    </center>
                                                </td>
                                            </tr>
                                        </table>
                                    </p:dialog>
                                    <!-- Fin Reparticion de Pago para varias Facturas !-->
                                </p:tab>
                                <p:tab title="Actividades y recordatorios"  >
                                    <!-- Panel para ver las opciones de actividades -->
                                    <p:outputPanel autoUpdate="true">
                                        <p:panel rendered="true" style="border: none;">
                                            <br/>
                                            <center>
                                                <table style="font-family: Arial;width: 1000px;font-weight: bold;">
                                                    <tr>
                                                        <td><p:outputLabel value="» Actividades y recordatorios" /></td></tr><tr>
                                                        <td><p:separator/></td>
                                                    </tr>
                                                </table>
                                                <table  style="font-family: Arial;font-size: 12px;" cellspacing="4" cellpdding="20">
                                                    <tr>
                                                        <td>
                                                            <c:choose>
                                                                <c:when test="#{MBCartera.selectPendiXCobrar.size()>0}">
                                                                    <tr>
                                                                        <b><p:outputLabel value="Seleccione la factura a la que desea asignarle una Actividad/Recordatorio" style="font-family:Arial;font-size: 13px;"/></b>
                                                                        <td>
                                                                            <b><h:outputText value="Factura:"  style="font-family: Arial;font-size: 12px;" />  </b>      
                                                                        </td>
                                                                        <td>
                                                                            <p:selectOneMenu  id="IdFactCart" style="width:120px;font-size: 12px;"  value="#{MBCartera.codFactRecord}" >
                                                                                <f:selectItem itemLabel="--Seleccione--" itemValue="0"  />
                                                                                <p:ajax update="OpcionesTablero"  listener="#{MBCartera.cargarInfoAvaluo()}"/>
                                                                                <f:selectItems id="SelCartFac" value="#{MBCartera.cargarFacturas}" />
                                                                            </p:selectOneMenu>                                                           
                                                                        </td>
                                                                    </tr>
                                                                </c:when>
                                                            </c:choose>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table style="font-family: Arial;width: 1000px;font-weight: bold;">
                                                    <tr>
                                                        <td>
                                                            <p:panel id="OpcionesTablero" style="border: none;">
                                                                <b><p:outputLabel value="Seleccione una opción: " style="font-family:Arial;font-size: 13px;"/></b>
                                                                <br/>
                                                                <p:selectOneRadio id="OpTablero" value="#{MBActivRecor.opcionTableroControlSeguim}" style="font-family: Arial;font-size: 12px;">
                                                                    <f:selectItem itemLabel="Actividades" itemValue="1"  />
                                                                    <f:selectItem itemLabel="Recordatorios" itemValue="2" />                                                                
                                                                    <p:ajax event="change"  update="OpcionMisActividades,OpcionMisRecordatorios,
                                                                            OpcionActividadesAsignadas,OpcionRecordatAsignadas"  listener="#{MBActivRecor.habilitarInfoTableroControl(0)}"/>
                                                                </p:selectOneRadio>
                                                            </p:panel>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </center>
                                            <br/>
                                        </p:panel>
                                    </p:outputPanel>        
                                    <!-- Panel para ver las opciones de actividades -->
                                    <p:outputPanel autoUpdate="true">
                                        <p:panel rendered="#{MBActivRecor.opcionTableroControlSeguim == 1}" style="border: none;">
                                            <br/>
                                            <table cellspacing="3" cellpadding="3">
                                                <tr>
                                                    <td><p:commandButton value="Mis actividades" action="#{MBActivRecor.habilitarInfoTableroControl(1)}"  
                                                                         update="OpcionMisActividades,OpcionMisRecordatorios,OpcionActividadesAsignadas,OpcionRecordatAsignadas" icon="ui-icon-tag" style="font-size: 13px;font-family: Arial;"/></td>
                                                    <td><p:commandButton  style="font-family: Arial;font-size: 13px;"                                      
                                                                          icon="ui-icon-arrowthick-1-e" value="Crear y asignar actividad"   action="#{MBActivRecor.habilitarInfoTableroControl(2)}" 
                                                                          update=":contenedorGeneral:Contenedor:growl_General,DialogActividadRealizada,OpcionMisActividades,OpcionMisRecordatorios
                                                                          ,OpcionActividadesAsignadas,OpcionRecordatAsignadas"  /></td>
                                                    <td><p:commandButton  style="font-family: Arial;font-size: 13px;"                                      
                                                                          icon="ui-icon-arrowthick-1-e" value="Estado de actividades asignadas"   action="#{MBActivRecor.habilitarInfoTableroControl(6)}" 
                                                                          update="OpcionMisActividades,OpcionMisRecordatorios,OpcionActividadesAsignadas,OpcionRecordatAsignadas"  /></td>
                                                </tr>
                                            </table>
                                            <br/>
                                        </p:panel>
                                    </p:outputPanel>       
                                    <!-- Panel para ver las opciones de recordatorios -->
                                    <p:outputPanel autoUpdate="true">                                                
                                        <p:panel rendered="#{MBActivRecor.opcionTableroControlSeguim == 2}" style="border: none;">
                                            <br/>
                                            <table cellspacing="3" cellpadding="3">
                                                <tr>
                                                    <td> <p:commandButton value="Mis recordatorios" action="#{MBActivRecor.habilitarInfoTableroControl(3)}"  
                                                                          update="OpcionMisActividades,OpcionMisRecordatorios,OpcionActividadesAsignadas,OpcionRecordatAsignadas" icon="ui-icon-tag" style="font-size: 13px;font-family: Arial;"/></td>
                                                    <td><p:commandButton value="Crear y asignar recordatorios"
                                                                         icon="ui-icon-arrowthick-1-e" action="#{MBActivRecor.habilitarInfoTableroControl(4)}" style="font-size: 13px;font-family: Arial;"
                                                                         update=":contenedorGeneral:Contenedor:growl_General,DialogActividadRealizada,OpcionMisActividades,OpcionMisRecordatorios,
                                                                         OpcionActividadesAsignadas,OpcionRecordatAsignadas"/></td>
                                                    <td><p:commandButton  style="font-family: Arial;font-size: 13px;"                                      
                                                                          icon="ui-icon-arrowthick-1-e" value="Estado de recordatorios asignados"   action="#{MBActivRecor.habilitarInfoTableroControl(7)}" 
                                                                          update="OpcionMisActividades,OpcionMisRecordatorios,OpcionActividadesAsignadas,OpcionRecordatAsignadas"  /></td>
                                                </tr>
                                            </table>
                                            <br/>
                                        </p:panel>
                                    </p:outputPanel>

                                    <!-- Panel para ver las actividades que tiene asignada la persona para realizar -->
                                    <p:outputPanel id="OpcionMisActividades">                                               
                                        <p:panel rendered="#{MBActivRecor.estadoPanelMisActivid}" style="border: none;">
                                            <br/>                                                    
                                            <table>
                                                <tr>
                                                    <td style="width: 120px;">
                                                        <b><p:outputLabel value="» Mis actividades a realizar" style="font-size: 14px;font-family: Arial;" /></b>
                                                    </td>
                                                    <td style="width: 15px;">
                                                        <b><big><font face="Arial"><p:outputLabel value="|" /></font></big></b>
                                                    </td>
                                                    <td style="width: 200px;">

                                                        <table border="0" >
                                                            <tr>

                                                                <td style="background: #F6B7B7 !important;" >
                                                                    <p:outputLabel  value="---- " style="font-size: 12px;font-family: Arial;color: #F6B7B7 !important;"/>
                                                                </td>
                                                                <td>
                                                                    <p:outputLabel  value="Atrasado" style="font-size: 12px;font-family: Arial;"/>
                                                                </td>
                                                                <td style="background: #F9AE6C !important;" >
                                                                    <p:outputLabel  value="---- " style="font-size: 12px;font-family: Arial;color: #F9AE6C !important;"/>
                                                                </td>
                                                                <td>
                                                                    <p:outputLabel  value="Por culminar " style="font-size: 12px;font-family: Arial;"/>
                                                                </td>
                                                            </tr>
                                                        </table>

                                                    </td>

                                                </tr>
                                                <tr>
                                                    <td colspan="10">
                                                        <p:separator />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td  colspan="10">
                                                        <p:dataTable var="AccionesSeguim" value="#{MBActivRecor.listAccionesSeg}"
                                                                     selectionMode="single" id="AccionesSeguim" style="font-family: Arial;font-size: 12px;width: auto;" 
                                                                     rowKey="#{AccionesSeguim.codAccion}" selection="#{MBActivRecor.segActivid}"  widgetVar="AccionesSeguimiento"
                                                                     scrollHeight="50" emptyMessage="No se encontraron actividades" 
                                                                     rowStyleClass="#{AccionesSeguim.estadoTiempoTanscurrAcc eq 'Atrasado' ? 'FaltaInforma':
                                                                                      AccionesSeguim.estadoTiempoPorCulminarAct eq 'Si' ? 'highlight': null}">

                                                            <p:column headerText="N* actividad" style="font-family:Arial;font-size: 12px;width: 100px;" >
                                                                <h:outputText value="#{AccionesSeguim.codAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Nombre" style="font-family:Arial;font-size: 12px;width: 150px;" >
                                                                <h:outputText value="#{AccionesSeguim.nombreAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Descripción" style="font-family:Arial;font-size: 12px;width: 150px;"  >
                                                                <h:outputText value="#{AccionesSeguim.descripcionAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Fecha maxima de ejecucion" style="font-family:Arial;font-size: 12px;width: 150px;"  >
                                                                <h:outputText value="#{AccionesSeguim.fecha_Max_ejecuc}" />
                                                            </p:column>
                                                            <p:column headerText="Tiempo restante" style="font-family:Arial;font-size: 12px;width: 150px;"  >
                                                                <h:outputText value="#{AccionesSeguim.maximoTiempoAccion}" />
                                                            </p:column>

                                                        </p:dataTable>
                                                        <br/>
                                                        <center>
                                                            <p:commandButton  style="font-family: Arial;font-size: 13px;"                                      
                                                                              icon="ui-icon-check" value="Seleccionar actividad"   action="#{MBActivRecor.cargarDialogActivComple(1)}" 
                                                                              update=":contenedorGeneral:Contenedor:growl_General,DialogActividadRealizada"  />
                                                        </center>
                                                        <br/>
                                                    </td>

                                                </tr>
                                            </table>
                                            <br/>
                                        </p:panel>                                                
                                    </p:outputPanel>

                                    <!-- Panel para ver los recordatorios que no se han realizado-->
                                    <p:outputPanel id="OpcionMisRecordatorios">
                                        <p:panel rendered="#{MBActivRecor.estadoPanelMisRecordat}" style="border: none;">
                                            <br/>
                                            <div align="left">
                                                <table cellspacing="3" cellpadding="3">
                                                    <tr>
                                                        <td colspan="20">
                                                            <b><p:outputLabel value="» Mis recordatorios" style="font-size: 16px;font-family: Arial;" /></b>
                                                        </td>
                                                        <td >
                                                            <b><big><font face="Arial"><p:outputLabel value="|" /></font></big></b>
                                                        </td>
                                                        <td >

                                                            <table border="0" >
                                                                <tr>

                                                                    <td style="background: #F6B7B7 !important;" >
                                                                        <p:outputLabel  value="---- " style="font-size: 12px;font-family: Arial;color: #F6B7B7 !important;"/>
                                                                    </td>
                                                                    <td>
                                                                        <p:outputLabel  value="Atrasado" style="font-size: 12px;font-family: Arial;"/>
                                                                    </td>  
                                                                    <td style="background: #F9AE6C !important;" >
                                                                        <p:outputLabel  value="---- " style="font-size: 12px;font-family: Arial;color: #F9AE6C !important;"/>
                                                                    </td>
                                                                    <td>
                                                                        <p:outputLabel  value="Por culminar " style="font-size: 12px;font-family: Arial;"/>
                                                                    </td>
                                                                </tr>
                                                            </table>

                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <table>
                                                <tr>
                                                    <td colspan="10">
                                                        <p:separator />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p:dataTable  var="SeguimRecordat" value="#{MBActivRecor.listaRecordatorios}"
                                                                      id="ListaRecordatorios" style="font-family: Arial;font-size: 12px;width: auto;" 
                                                                      rowKey="#{SeguimRecordat.codRecordat}" selection="#{MBActivRecor.listaRecordatoriosRealizados}"  widgetVar="ListaRecordatorios"
                                                                      emptyMessage="No se encontraron recordatorios" 
                                                                      rowStyleClass="#{SeguimRecordat.estadoTiempoTanscurrRecord eq 'Atrasado' ? 'FaltaInforma':
                                                                                       SeguimRecordat.estadoTiempoPorCulminarRecor eq 'Si' ? 'highlight': null}">

                                                            <center><p:column headerText="Realizado"  selectionMode="multiple" style="font-family:Arial;font-size: 12px;width: 18px;" >                                                                       
                                                                </p:column> </center>
                                                            <p:column headerText="Nombre" style="font-family:Arial;font-size: 12px;width: 150px;" >
                                                                <h:outputText value="#{SeguimRecordat.nombreRecorda}" />
                                                            </p:column>
                                                            <p:column headerText="Descripción" style="font-family:Arial;font-size: 12px;width: 150px;"  >
                                                                <h:outputText value="#{SeguimRecordat.descripRecordat}" />
                                                            </p:column>
                                                            <p:column headerText="Maximo tiempo para ejecutar" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{SeguimRecordat.fecha_Max_ejecuc}" />                                                                        
                                                            </p:column>
                                                            <p:column headerText="Tiempo restante" style="font-family:Arial;font-size: 12px;width: 150px;"  >
                                                                <h:outputText value="#{SeguimRecordat.maximoReqRecordat}" />
                                                            </p:column>

                                                        </p:dataTable>
                                                        <br/>
                                                        <center>
                                                            <p:commandButton  style="font-family: Arial;font-size: 13px;"                                      
                                                                              icon="ui-icon-check" value="Completar recordatorio(s)" action="#{MBActivRecor.completarRecordat()}"
                                                                              update=":contenedorGeneral:Contenedor:growl_General,OpcionMisRecordatorios"  />
                                                        </center>
                                                    </td>
                                                </tr>
                                            </table>
                                        </p:panel>                                              
                                    </p:outputPanel>

                                    <!-- Panel para ver las actividades que asigno la persona  -->
                                    <p:outputPanel id="OpcionActividadesAsignadas">                                                
                                        <p:panel rendered="#{MBActivRecor.estadoPanelActividAsign}" style="border: none;">
                                            <br/>
                                            <div align="left">
                                                <table cellspacing="3" cellpadding="3">
                                                    <tr>
                                                        <td colspan="20">
                                                            <b><p:outputLabel value="» Actividades asignadas" style="font-size: 16px;font-family: Arial;" /></b>
                                                        </td>
                                                        <td >
                                                            <b><big><font face="Arial"><p:outputLabel value="|" /></font></big></b>
                                                        </td>
                                                        <td >

                                                            <table border="0" >
                                                                <tr>

                                                                    <td style="background: #F6B7B7 !important;" >
                                                                        <p:outputLabel  value="---- " style="font-size: 12px;font-family: Arial;color: #F6B7B7 !important;"/>
                                                                    </td>
                                                                    <td>
                                                                        <p:outputLabel  value="Atrasado" style="font-size: 12px;font-family: Arial;"/>
                                                                    </td>
                                                                    <td style="background: #F9AE6C !important;" >
                                                                        <p:outputLabel  value="---- " style="font-size: 12px;font-family: Arial;color: #F9AE6C !important;"/>
                                                                    </td>
                                                                    <td>
                                                                        <p:outputLabel  value="Por culminar " style="font-size: 12px;font-family: Arial;"/>
                                                                    </td>
                                                                </tr>
                                                            </table>

                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <br/>
                                            <table>
                                                <tr>
                                                    <td colspan="20">
                                                        <b><p:outputLabel value="» Internas (empleados)" style="font-size:13px;font-family: Arial;" /></b>
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td colspan="10">
                                                        <p:separator />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p:dataTable var="ActividAsigns" value="#{MBActivRecor.listActiviAsig}"
                                                                     id="ActividadesAsignadas" style="font-family: Arial;font-size: 12px;width: auto;" 
                                                                     widgetVar="ActividadesAsignadas"
                                                                     scrollHeight="50" emptyMessage="No se encontraron actividades"
                                                                     rowStyleClass="#{ActividAsigns.estadoTiempoTanscurrAcc eq 'Atrasado' and ActividAsigns.estadoAccion eq 'Pendiente por realizar'   ? 'FaltaInforma':
                                                                                      ActividAsigns.estadoTiempoPorCulminarAct eq 'Si' ? 'highlight': null}" >

                                                            <c:choose>
                                                                <c:when test="#{ActividAsigns.estadoAccion eq 'Pendiente por realizar'}">
                                                                    <center><p:column headerText="Realizado"  selectionMode="multiple" style="font-family:Arial;font-size: 12px;width: 18px;" >                                                                       
                                                                        </p:column> </center>
                                                                </c:when>
                                                            </c:choose>


                                                            <p:column headerText="Nombre" style="font-family:Arial;font-size: 12px;width: 150px;" >
                                                                <h:outputText value="#{ActividAsigns.nombreAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Descripción" style="font-family:Arial;font-size: 12px;width: 140px;"  >
                                                                <h:outputText value="#{ActividAsigns.descripcionAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Maxima fecha de ejecución" style="font-family:Arial;font-size: 12px;width: 130px;"  >
                                                                <h:outputText value="#{ActividAsigns.fecha_Max_ejecuc}" />                                                                        
                                                            </p:column>                                                                    
                                                            <p:column headerText="Tiempo restante" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsigns.maximoTiempoAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Fecha de solución" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsigns.fecha_solucionActivORecor}" />                                                                        
                                                            </p:column>       
                                                            <p:column headerText="Empleado asignado" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsigns.personaAsignarInternOExt}" />
                                                            </p:column>
                                                            <p:column headerText="Estado" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsigns.estadoAccion}" />
                                                            </p:column>

                                                        </p:dataTable>                                                                
                                                    </td>

                                                </tr>
                                            </table>
                                            <br/>
                                            <table>
                                                <tr>
                                                    <td colspan="20">
                                                        <b><p:outputLabel value="» Externas" style="font-size:13px;font-family: Arial;" /></b>
                                                    </td>
                                                </tr>                                                           
                                                <tr>
                                                    <td colspan="10">
                                                        <p:separator />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p:dataTable var="ActividAsignsExter" value="#{MBActivRecor.listActiviAsigExter}"
                                                                     id="ActividadesAsignadasExter" style="font-family: Arial;font-size: 12px;width: auto;" 
                                                                     rowKey="#{ActividAsignsExter.codAccion}" selection="#{MBActivRecor.listaActividadesExterRealiz}"  widgetVar="ActividadesAsignadasExternas"
                                                                     scrollHeight="50" emptyMessage="No se encontraron actividades"
                                                                     rowStyleClass="#{ActividAsignsExter.estadoTiempoTanscurrAcc eq 'Atrasado' and ActividAsignsExter.estadoAccion eq 'Pendiente por realizar'   ? 'FaltaInforma':
                                                                                      ActividAsignsExter.estadoTiempoPorCulminarAct eq 'Si' ? 'highlight': null}" >


                                                            <center><p:column headerText="Realizado"  selectionMode="multiple" style="font-family:Arial;font-size: 12px;width: 50px;" >                                                                       
                                                                </p:column> </center>


                                                            <p:column headerText="Nombre" style="font-family:Arial;font-size: 12px;width: 150px;" >
                                                                <h:outputText value="#{ActividAsignsExter.nombreAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Descripción" style="font-family:Arial;font-size: 12px;width: 140px;"  >
                                                                <h:outputText value="#{ActividAsignsExter.descripcionAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Tipo de externo:" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsignsExter.tipoPersona}" />
                                                            </p:column>
                                                            <p:column headerText="Maxima fecha de ejecución" style="font-family:Arial;font-size: 12px;width: 130px;"  >
                                                                <h:outputText value="#{ActividAsignsExter.fecha_Max_ejecuc}" />                                                                        
                                                            </p:column>                                                                    
                                                            <p:column headerText="Tiempo restante" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsignsExter.maximoTiempoAccion}" />
                                                            </p:column>
                                                            <p:column headerText="Fecha de solución" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsignsExter.fecha_solucionActivORecor}" />                                                                        
                                                            </p:column>       
                                                            <p:column headerText="Asignado a:" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsignsExter.personaAsignarInternOExt}" />
                                                            </p:column>
                                                            <p:column headerText="Estado" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{ActividAsignsExter.estadoAccion}" />
                                                            </p:column>

                                                        </p:dataTable>    
                                                        <br/>   
                                                        <center>
                                                            <p:commandButton  style="font-family: Arial;font-size: 13px;"                                      
                                                                              icon="ui-icon-check" value="Completar actividad(es) externa(s)" action="#{MBActivRecor.completarActiviAsigExternas()}"
                                                                              update=":contenedorGeneral:Contenedor:growl_General,OpcionActividadesAsignadas"  />
                                                        </center>
                                                    </td>

                                                </tr>
                                            </table>
                                            <br/>
                                        </p:panel>    
                                    </p:outputPanel>

                                    <!-- Panel para ver los recordatorios que asigno la persona  -->
                                    <p:outputPanel id="OpcionRecordatAsignadas">
                                        <p:panel rendered="#{MBActivRecor.estadoPanelRecordatAsign}" style="border: none;">
                                            <br/>
                                            <div align="left">
                                                <table cellspacing="3" cellpadding="3">
                                                    <tr>
                                                        <td colspan="20">
                                                            <b><p:outputLabel value="» Recordatorios asignados" style="font-size: 16px;font-family: Arial;" /></b>
                                                        </td>
                                                        <td >
                                                            <b><big><font face="Arial"><p:outputLabel value="|" /></font></big></b>
                                                        </td>
                                                        <td >

                                                            <table border="0" >
                                                                <tr>

                                                                    <td style="background: #F6B7B7 !important;" >
                                                                        <p:outputLabel  value="----" style="font-size: 12px;font-family: Arial;color: #F6B7B7 !important;"/>
                                                                    </td>
                                                                    <td>
                                                                        <p:outputLabel  value="Atrasado" style="font-size: 12px;font-family: Arial;"/>
                                                                    </td>
                                                                    <td style="background: #F9AE6C !important;" >
                                                                        <p:outputLabel  value="----" style="font-size: 12px;font-family: Arial;color: #F9AE6C !important;"/>
                                                                    </td>
                                                                    <td>
                                                                        <p:outputLabel  value="Por culminar " style="font-size: 12px;font-family: Arial;"/>
                                                                    </td>
                                                                </tr>
                                                            </table>

                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <br/>
                                            <table>
                                                <tr>
                                                    <td colspan="20">
                                                        <b><p:outputLabel value="» Internas (empleados)" style="font-size:13px;font-family: Arial;" /></b>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="10">
                                                        <p:separator />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p:dataTable var="RecordatAsigns" value="#{MBActivRecor.listRecordatAsig}"
                                                                     id="RecordatorAsignados" style="font-family: Arial;font-size: 12px;width: auto;" 
                                                                     widgetVar="RecordatorAsignados"
                                                                     scrollHeight="50" emptyMessage="No se encontraron recordatorios" 
                                                                     rowStyleClass="#{RecordatAsigns.estadoTiempoTanscurrRecord eq 'Atrasado' and RecordatAsigns.estadoRecord eq 'Pendiente por realizar'   ? 'FaltaInforma':
                                                                                      RecordatAsigns.estadoTiempoPorCulminarRecor eq 'Si' ? 'highlight': null}">


                                                            <p:column headerText="Nombre" style="font-family:Arial;font-size: 12px;width: 150px;" >
                                                                <h:outputText value="#{RecordatAsigns.nombreRecorda}" />
                                                            </p:column>
                                                            <p:column headerText="Descripción" style="font-family:Arial;font-size: 12px;width: 140px;"  >
                                                                <h:outputText value="#{RecordatAsigns.descripRecordat}" />
                                                            </p:column>
                                                            <p:column headerText="Maximo fecha de ejecución" style="font-family:Arial;font-size: 12px;width: 130px;"  >
                                                                <h:outputText value="#{RecordatAsigns.fecha_Max_ejecuc}" />
                                                            </p:column>
                                                            <p:column headerText="Tiempo restante" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{RecordatAsigns.maximoReqRecordat}" />
                                                            </p:column>
                                                            <p:column headerText="Fecha de solución" style="font-family:Arial;font-size: 12px;width: 130px;"  >
                                                                <h:outputText value="#{RecordatAsigns.fecha_solucionActivORecor}" />                                                                        
                                                            </p:column>
                                                            <p:column headerText="Empleado asignado" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{RecordatAsigns.personaAsignarInternOExt}" />
                                                            </p:column>
                                                            <p:column headerText="Estado" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{RecordatAsigns.estadoRecord}" />
                                                            </p:column>

                                                        </p:dataTable>                                                             
                                                    </td>

                                                </tr>
                                            </table>
                                            <br/>
                                            <table>
                                                <tr>
                                                    <td colspan="20">
                                                        <b><p:outputLabel value="» Externas" style="font-size:13px;font-family: Arial;" /></b>
                                                    </td>
                                                </tr> 
                                                <tr>
                                                    <td colspan="10">
                                                        <p:separator />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p:dataTable var="RecordatAsignsExter" value="#{MBActivRecor.listRecordatAsigExter}"
                                                                     id="RecordatorAsignadosExter" style="font-family: Arial;font-size: 12px;width: auto;" 
                                                                     rowKey="#{RecordatAsignsExter.codRecordat}" selection="#{MBActivRecor.listaRecordarAsigExterRealiz}"  widgetVar="RecordatorAsignadosExtern"
                                                                     scrollHeight="50" emptyMessage="No se encontraron recordatorios" 
                                                                     rowStyleClass="#{RecordatAsignsExter.estadoTiempoTanscurrRecord eq 'Atrasado' and RecordatAsignsExter.estadoRecord eq 'Pendiente por realizar'   ? 'FaltaInforma':
                                                                                      RecordatAsignsExter.estadoTiempoPorCulminarRecor eq 'Si' ? 'highlight': null}">

                                                            <center><p:column headerText="Realizado"  selectionMode="multiple" style="font-family:Arial;font-size: 12px;width: 50px;" >                                                                       
                                                                </p:column> </center>

                                                            <p:column headerText="Nombre" style="font-family:Arial;font-size: 12px;width: 150px;" >
                                                                <h:outputText value="#{RecordatAsignsExter.nombreRecorda}" />
                                                            </p:column>
                                                            <p:column headerText="Descripción" style="font-family:Arial;font-size: 12px;width: 140px;"  >
                                                                <h:outputText value="#{RecordatAsignsExter.descripRecordat}" />
                                                            </p:column>
                                                            <p:column headerText="Tipo de externo:" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{RecordatAsignsExter.tipoPersona}" />
                                                            </p:column>
                                                            <p:column headerText="Maximo fecha de ejecución" style="font-family:Arial;font-size: 12px;width: 130px;"  >
                                                                <h:outputText value="#{RecordatAsignsExter.fecha_Max_ejecuc}" />
                                                            </p:column>
                                                            <p:column headerText="Tiempo restante" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{RecordatAsignsExter.maximoReqRecordat}" />
                                                            </p:column>
                                                            <p:column headerText="Fecha de solución" style="font-family:Arial;font-size: 12px;width: 130px;"  >
                                                                <h:outputText value="#{RecordatAsignsExter.fecha_solucionActivORecor}" />                                                                        
                                                            </p:column>
                                                            <p:column headerText="Asignado a" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{RecordatAsignsExter.personaAsignarInternOExt}" />
                                                            </p:column>
                                                            <p:column headerText="Estado" style="font-family:Arial;font-size: 12px;width: 120px;"  >
                                                                <h:outputText value="#{RecordatAsignsExter.estadoRecord}" />
                                                            </p:column>

                                                        </p:dataTable>      
                                                        <br/>
                                                        <center>
                                                            <p:commandButton  style="font-family: Arial;font-size: 13px;"                                      
                                                                              icon="ui-icon-check" value="Completar recordatorio(s) externo(s)" action="#{MBActivRecor.completarRecordatAsigExternos()}"
                                                                              update=":contenedorGeneral:Contenedor:growl_General,OpcionRecordatAsignadas"  />
                                                        </center>
                                                    </td>

                                                </tr>
                                            </table>
                                            <br/>
                                        </p:panel> 
                                    </p:outputPanel>


                                    <!--DIALOGS DE INFORMACION DE LAS ACTIVIDADES QUE TIENE QUE REALIZAR Y/O ASIGNAR-->
                                    <p:outputPanel style="font-family: Arial;font-size: 12px;" id="DialogActividadRealizada">
                                        <p:dialog header="#{MBActivRecor.estadoTituloDialogActivRecordat}" widgetVar="DlgActivRealiada" modal="false" height="auto" width="600" showEffect="fade" hideEffect="fade">
                                            <p:outputPanel style="font-family: Arial;font-size: 12px;" id="TablaActiivORecorda">
                                                <br/>
                                                <center>
                                                    <table cellspacing="3" cellpadding="3" border="0">
                                                        <tr>
                                                            <td> <b><h:outputLabel styleClass="Texto" style="color: red;" value="Campos obligatorios (*)" /></b></td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="10"><p:separator style="font-family:Arial;font-size: 12px;" /></td>
                                                        </tr>
                                                        <c:choose>
                                                            <c:when test="#{MBActivRecor.estadoTituloDialogActivRecordat == 'Crear y asignar actividades' || MBActivRecor.estadoTituloDialogActivRecordat == 'Crear y asignar recordatorios' }">
                                                                <c:choose>
                                                                    <c:when test="#{MBActivRecor.estadoTituloDialogActivRecordat == 'Crear y asignar actividades'}">
                                                                        <tr>
                                                                            <td style="width: 170px;"><b><p:outputLabel value="Nombre de acción:* "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                            <td> 
                                                                                <p:selectOneMenu id="CmbNombreActividad"  style="width:200px;font-size: 12px;" value="#{MBActivRecor.nombreActivORecor}" >
                                                                                    <f:selectItem itemLabel="--Seleccione--" itemValue=""  />
                                                                                    <f:selectItems id="SelItemActivid"  value="#{MBActivRecor.cargaActividadesCombo}" />
                                                                                </p:selectOneMenu>
                                                                            </td>
                                                                            <td>
                                                                                <p:commandButton id="btnCrearActividad" title="Crear nueva actividad" style="font-size: 13px;font-family: Arial;" update="DialogCrearActividadesORecordatorr"  icon="ui-icon-plusthick"  action="#{MBActivRecor.abrirDialogCreaActividORecord(1)}" />
                                                                                <p:tooltip id="TipCrearActividad" for="btnCrearActividad" showEffect="clip" style="font-size: 12px;font-family: Arial;" />
                                                                            </td>
                                                                        </tr>
                                                                    </c:when>
                                                                    <c:otherwise>
                                                                        <tr>
                                                                            <td style="width: 170px;"><b><p:outputLabel value="Nombre de recordatorio:* "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                            <td> 
                                                                                <p:selectOneMenu id="CmbNombreRecordato"  style="width:200px;font-size: 12px;" value="#{MBActivRecor.nombreActivORecor}" >
                                                                                    <f:selectItem itemLabel="--Seleccione--" itemValue=""  />
                                                                                    <f:selectItems id="SelItemRecordat"  value="#{MBActivRecor.cargaRecordatoriosCombo}" />
                                                                                </p:selectOneMenu>
                                                                            </td>
                                                                            <td >
                                                                                <p:commandButton id="btnCrearRecordator" title="Crear nuevo recordatorio" style="font-size: 13px;font-family: Arial;" update="DialogCrearActividadesORecordatorr" icon="ui-icon-plusthick"   action="#{MBActivRecor.abrirDialogCreaActividORecord(2)}" />
                                                                                <p:tooltip id="TipCrearRecordat" for="btnCrearRecordator" showEffect="clip" style="font-size: 12px;font-family: Arial;"/>
                                                                            </td>
                                                                        </tr>
                                                                    </c:otherwise>
                                                                </c:choose>

                                                                <tr>
                                                                    <td > <b><p:outputLabel value="Pioridad:* "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                    <td colspan="2" style="width:200px;"> <p:selectOneMenu id="CmbNombrePioridad"  style="width:200px;font-size: 12px;" value="#{MBActivRecor.pioridadActivORecor}" >
                                                                            <f:selectItem itemLabel="--Seleccione--" itemValue=""  />
                                                                            <f:selectItem itemLabel="Baja" itemValue="Baja"  />
                                                                            <f:selectItem itemLabel="Media" itemValue="Media"  />
                                                                            <f:selectItem itemLabel="Alta" itemValue="Alta" />
                                                                        </p:selectOneMenu>
                                                                    </td>
                                                                </tr>            
                                                            </c:when>
                                                            <c:otherwise>
                                                                <tr>
                                                                    <td><b><p:outputLabel value="N° de actividad: "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                    <td><p:outputLabel value="#{MBActivRecor.codigoActivORecor}"  style="font-family: Arial;font-size: 12px;" /></td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b><p:outputLabel value="Nombre: "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                    <td> <p:outputLabel value="#{MBActivRecor.nombreActivORecor}"  style="font-family: Arial;font-size: 12px;width: 200px;" /></td>
                                                                </tr>
                                                                <tr>
                                                                    <td  ><b> <p:outputLabel value="Descripción: "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                    <td style="width: 250px;"><p:outputLabel value="#{MBActivRecor.descripcionActivORecor}" style="font-family: Arial;font-size: 12px;" /></td>
                                                                </tr>
                                                                <tr>
                                                                    <td> <b><p:outputLabel value="Pioridad: "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                    <td><p:outputLabel value="#{MBActivRecor.pioridadActivORecor}" style="font-family: Arial;font-size: 12px;" /></td>
                                                                </tr>            
                                                            </c:otherwise>
                                                        </c:choose>
                                                    </table>
                                                    <p:outputPanel id="CamposCompartidos">
                                                        <table cellspacing="3" cellpadding="3" border="0">
                                                            <c:choose>
                                                                <c:when test="#{MBActivRecor.estadoTituloDialogActivRecordat == 'Verificar y completar actividad'}">
                                                                    <tr>
                                                                        <td style="width: 145px;"> <b><p:outputLabel value="Actividad completada:* "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                        <td style="width: 340px;">
                                                                            <p:selectBooleanCheckbox id="chk_estadoValidarActividad" value="#{MBActivRecor.estadoActividadComplet}" >                                                                       
                                                                            </p:selectBooleanCheckbox>
                                                                        </td>
                                                                    </tr>
                                                                </c:when>                                                                
                                                                <c:otherwise>
                                                                    <c:choose>
                                                                        <c:when test="#{MBActivRecor.estadoTituloDialogActivRecordat == 'Crear y asignar actividades' || MBActivRecor.estadoTituloDialogActivRecordat == 'Crear y asignar recordatorios' }">
                                                                            <tr>
                                                                                <td style="width: 170px;"> <b><p:outputLabel value="Tipo de persona:* "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                                <td style="width: 250px;">
                                                                                    <p:selectOneMenu id="TipoPersona"  style="width:200px;font-size: 12px;" value="#{MBActivRecor.tipoPersona}" >
                                                                                        <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true" />
                                                                                        <p:ajax update="CamposCompartidos" listener="#{MBActivRecor.selectTipoPersonaInterna()}"/>
                                                                                        <f:selectItem itemLabel="Externa" itemValue="Externa"  />
                                                                                        <f:selectItem itemLabel="Interna" itemValue="Interna"  />
                                                                                    </p:selectOneMenu>
                                                                                </td>
                                                                            </tr>                                                             
                                                                            <c:choose>
                                                                                <c:when test="#{MBActivRecor.tipoPersona == 'Externa'}">
                                                                                    <tr>
                                                                                        <td>
                                                                                            <p:outputPanel >
                                                                                                <b><p:outputLabel value="Tipo de externo:* "  style="font-family: Arial;font-size: 12px;"  rendered="#{MBActivRecor.tipoPersona == 'Externa'}"/></b>
                                                                                            </p:outputPanel></td>
                                                                                        <td>
                                                                                            <p:outputPanel autoUpdate="true">
                                                                                                <p:selectOneMenu id="CmbTipoPersonaExterno"  style="width:200px;font-size: 12px;" value="#{MBActivRecor.tipoPersonaExterno}" rendered="#{MBActivRecor.tipoPersona == 'Externa'}" >
                                                                                                    <f:selectItem itemLabel="--Seleccione--" itemValue=""  />
                                                                                                    <p:ajax update="lblPerExt,PersonaExterno" listener="#{MBActivRecor.selectTipoPersonaExterna()}"/>
                                                                                                    <f:selectItem itemLabel="Cliente" itemValue="Cliente"  />
                                                                                                    <f:selectItem itemLabel="Entidad" itemValue="Entidad"  />
                                                                                                    <f:selectItem itemLabel="Avaluador" itemValue="Avaluador" />
                                                                                                </p:selectOneMenu>
                                                                                            </p:outputPanel>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <c:choose>
                                                                                        <c:when test="#{MBActivRecor.tipoPersonaExterno != '' || MBActivRecor.tipoPersonaExterno != null  }">

                                                                                            <tr>
                                                                                                <td>
                                                                                                    <p:outputPanel autoUpdate="true">
                                                                                                        <b><p:outputLabel id="lblPerExt" value="#{MBActivRecor.tipoPersonaExterno}:* "  rendered="#{MBActivRecor.tipoPersona == 'Externa'}" style="font-family: Arial;font-size: 12px;"  /></b>
                                                                                                    </p:outputPanel>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <p:outputPanel autoUpdate="true">
                                                                                                        <p:selectOneMenu id="PersonaExterno"  style="width:200px;font-size: 12px;" value="#{MBActivRecor.personaExterno}"  rendered="#{MBActivRecor.tipoPersona == 'Externa'}">
                                                                                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true" /> 
                                                                                                            <f:selectItems id="SelItemPersonaEctena"  value="#{MBActivRecor.cargaPersonaExterna}" />
                                                                                                        </p:selectOneMenu>
                                                                                                    </p:outputPanel>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </c:when>                                                                             

                                                                                    </c:choose>


                                                                                </c:when>
                                                                                <c:otherwise>
                                                                                    <c:choose>
                                                                                        <c:when test="#{MBActivRecor.tipoPersona == 'Interna'}">
                                                                                            <tr>

                                                                                                <td>   
                                                                                                    <p:outputPanel autoUpdate="true">
                                                                                                        <b> <p:outputLabel value="Empleado:* "  style="font-family: Arial;font-size: 12px;" rendered="#{MBActivRecor.tipoPersona == 'Interna'}" /></b>
                                                                                                    </p:outputPanel>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <p:outputPanel autoUpdate="true">
                                                                                                        <p:selectOneMenu id="PersonaInterno"  style="width:200px;font-size: 12px;" rendered="#{MBActivRecor.tipoPersona == 'Interna'}" value="#{MBActivRecor.personaInterno}" >
                                                                                                            <f:selectItem itemLabel="--Seleccione--" itemValue="" noSelectionOption="true" />      
                                                                                                            <f:selectItems id="SelItemPersonaInterna"  value="#{MBActivRecor.cargaPersonaInterna}" />
                                                                                                        </p:selectOneMenu>
                                                                                                    </p:outputPanel>

                                                                                                </td>
                                                                                            </tr>
                                                                                        </c:when>

                                                                                    </c:choose>

                                                                                </c:otherwise>
                                                                            </c:choose>
                                                                        </c:when>
                                                                        <c:otherwise>

                                                                        </c:otherwise>
                                                                    </c:choose>




                                                                </c:otherwise>
                                                            </c:choose>



                                                            <tr>
                                                                <td> <b><p:outputLabel value="Descripción:* "  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                <td >
                                                                    <p:inputTextarea id="txt_observa_activ_comple" title="Ingrese una observación" placeholder="Ingrese una observación" value="#{MBActivRecor.observaActividadComplet}"
                                                                                     style="font-family: Arial;font-size: 12px;width: 210px;height: 50px;text-transform: uppercase;"/>
                                                                    <p:tooltip for="txt_observa_activ_comple" showEffect="clip" style="font-size: 12px;font-family: Arial;" />
                                                                </td>
                                                            </tr>

                                                            <c:choose>
                                                                <c:when  test="#{MBActivRecor.estadoTituloDialogActivRecordat == 'Crear y asignar actividades' || MBActivRecor.estadoTituloDialogActivRecordat == 'Crear y asignar recordatorios' }" >
                                                                    <tr>
                                                                        <td style="width: 170px;"> <b><p:outputLabel value="Fecha de ejecución maxima:*"  style="font-family: Arial;font-size: 12px;"  /></b></td>
                                                                        <td>
                                                                            <p:calendar  pattern="yyyy-MM-dd HH:mm" mask="true" locale="es" value="#{MBActivRecor.fechaActividadComplet}" placeholder="AAAA / MM / DD HH:mm"  
                                                                                         style="font-family:Arial;font-size: 12px;" mindate="#{MBActivRecor.fecha_actual}">                                                                        
                                                                            </p:calendar>
                                                                        </td>
                                                                    </tr>
                                                                </c:when>

                                                            </c:choose>


                                                        </table>
                                                    </p:outputPanel>

                                                    <br/>
                                                    <table>
                                                        <tr>
                                                            <c:choose>
                                                                <c:when test="#{MBActivRecor.estadoTituloDialogActivRecordat == 'Verificar y completar actividad'}">
                                                                    <td>
                                                                        <center><p:commandButton icon="ui-icon-disk" style="font-family: Arial;font-size: 13px;" value="Completar actividad" action="#{MBActivRecor.modifiActividadAsignadaCompleta()}"
                                                                                                 update=":contenedorGeneral:Contenedor:growl_General,OpcionMisActividades"/> </center>
                                                                    </td>
                                                                </c:when>
                                                                <c:otherwise>
                                                                    <td>
                                                                        <center><p:commandButton icon="ui-icon-disk" style="font-family: Arial;font-size: 13px;" value="Asignar actividad" action="#{MBActivRecor.insertActividadAsignada()}"
                                                                                                 update=":contenedorGeneral:Contenedor:growl_General"/> </center>
                                                                    </td>
                                                                </c:otherwise>
                                                            </c:choose>
                                                        </tr>
                                                    </table>
                                                    <br/>
                                                </center>
                                            </p:outputPanel>
                                        </p:dialog>
                                    </p:outputPanel>

                                    <p:dialog widgetVar="DialogCrearActividadesORecordat" id="DialogCrearActividadesORecordatorr" width="1000" height="550" modal="false"  showEffect="fade" hideEffect="fade">
                                        <!-- Radios para mostrar ya sea el panel de actividades o recordatorios ok--> 
                                        <p:panel style="border: none;">
                                            <b><p:outputLabel value="Seleccione la opción a ver y/o modificar " style="font-family:Arial;font-size: 13px;"/></b>
                                            <br/>
                                            <br/>
                                            <p:selectOneRadio value="#{MBAdministacion.estadoRadioSeleccionActiviYRecord}" disabled="true">
                                                <f:selectItem itemLabel="Gestión de actividades" itemValue="GesAcccion" />
                                                <f:selectItem itemLabel="Gestión de recordatorios" itemValue="GesRecordat" />                    
                                                <p:ajax event="change" update="
                                                        InfAcciones,
                                                        InfRecordat" listener="#{MBAdministacion.visiblePanelActividRecordat()}"/>
                                            </p:selectOneRadio>
                                        </p:panel>
                                        <!-- Tablas de de tipo predios y maquinarias ok--> 

                                        <!-- Datatable que carga todos las actividades -->
                                        <p:outputPanel id="InfAcciones">

                                            <p:panel rendered="#{MBAdministacion.estadoRadioSeleccionActiviYRecord == 'GesAcccion'}" style="border: none;">
                                                <table>
                                                    <tr>                             
                                                        <td>
                                                            <p:commandButton value="Crear una nueva actividad" icon="ui-icon-arrowthick-1-e"  action="#{MBAdministacion.abrirInfodialogRegistro(10)}" update="GestionActividad" 
                                                                             style="font-family: Arial;font-size: 13px;"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <br/>
                                                <p:dataTable var="TipActivid" value="#{MBAdministacion.listActividGest}" selectionMode="single" id="TipActividadTable" style="font-family: Arial;font-size: 12px;" rows="50"
                                                             rowKey="#{TipActivid.codActividad}" selection="#{MBAdministacion.admActidiGest}"  widgetVar="TipActividad" scrollable="true" scrollHeight="250"
                                                             emptyMessage="No se encontraron registros">

                                                    <p:column headerText="Numero" filterBy="#{TipActivid.codActividad}" style="font-family:Arial;font-size: 12px;">
                                                        <h:outputText value="#{TipActivid.codActividad}"/>
                                                    </p:column>
                                                    <p:column headerText="Nombre"  filterBy="#{TipActivid.nombreActividad}" style="font-family:Arial;font-size: 12px;">
                                                        <h:outputText value="#{TipActivid.nombreActividad}" />
                                                    </p:column>

                                                </p:dataTable>
                                                <br/>
                                                <center>
                                                    <p:commandButton
                                                        update="GestionActividad,:contenedorGeneral:Contenedor:growl_General" 
                                                        icon="ui-icon-check" value="Seleccionar" action="#{MBAdministacion.abrirInfodialog(10)}" style="font-family: Arial;font-size: 13px;"/>
                                                </center>
                                                <br/>

                                            </p:panel>
                                        </p:outputPanel>

                                        <!-- Datatable que carga todas los recordatorios -->
                                        <p:outputPanel id="InfRecordat">
                                            <p:panel style="font-size: 12px;border: none;" rendered="#{MBAdministacion.estadoRadioSeleccionActiviYRecord == 'GesRecordat'}" >
                                                <table>
                                                    <tr>                             
                                                        <td>
                                                            <p:commandButton value="Crear un nuevo recordatorio" icon="ui-icon-arrowthick-1-e" action="#{MBAdministacion.abrirInfodialogRegistro(11)}" update="GestionRecordat"
                                                                             style="font-family: Arial;font-size: 13px;"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <br/>
                                                <p:dataTable var="TipRecordator" value="#{MBAdministacion.listRecordaGest}"  id="TipRecordatorTable" style="font-family: Arial;font-size: 12px;" rowKey="#{TipRecordator.codRecordatorio}" 
                                                             selection="#{MBAdministacion.admRecordatGest}"  widgetVar="TipoRecordat" scrollable="true" scrollHeight="250" selectionMode="single"
                                                             emptyMessage="No se encontraron registros">

                                                    <p:column headerText="Numero"  filterBy="#{TipRecordator.codRecordatorio}" style="font-family:Arial;font-size: 12px;">
                                                        <h:outputText value="#{TipRecordator.codRecordatorio}" />
                                                    </p:column>
                                                    <p:column headerText="Nombre"  filterBy="#{TipRecordator.nombreRecordatorio}" style="font-family:Arial;font-size: 12px;">
                                                        <h:outputText value="#{TipRecordator.nombreRecordatorio}" />
                                                    </p:column>                                      
                                                </p:dataTable>
                                                <br/>
                                                <center>
                                                    <p:commandButton update="GestionRecordat,
                                                                     :contenedorGeneral:Contenedor:growl_General" icon="ui-icon-check" value="Seleccionar"  action="#{MBAdministacion.abrirInfodialog(11)}"
                                                                     style="font-family: Arial;font-size: 13px;"/>
                                                </center>
                                                <br/>
                                            </p:panel>
                                        </p:outputPanel>

                                    </p:dialog>

                                    <!--DIALOGS DE Registro / modificacion -->

                                    <!-- Para Crear/modificar una actividad -->
                                    <p:outputPanel style="font-family: Arial;font-size: 12px;" id="GestionActividad">

                                        <p:dialog header="#{MBAdministacion.tituloDialogActividad}" widgetVar="DlgActividad"  height="auto" width="500" showEffect="fade" hideEffect="fade">
                                            <br/>
                                            <center>
                                                <table cellspacing="3" cellpadding="3">
                                                    <tr>
                                                        <td> <b><h:outputLabel styleClass="Texto" style="color: red;" value="Campos obligatorios (*)" /></b></td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="10"><p:separator style="font-family:Arial;font-size: 12px;" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td> <h:outputText value="Nombre: *"  style="font-family: Arial;font-size: 12px;" /></td>
                                                        <td><p:inputText id="txt_nombre" value="#{MBAdministacion.nombreActividad}" placeholder="Nombre"  style="font-family: Arial;font-size: 12px;"  onkeypress="return validarAlfaNumenicos(event)"/></td>
                                                    </tr>
                                                    <tr>
                                                        <td> <h:outputText value="Tipo *"  style="font-family: Arial;font-size: 12px;" /></td>
                                                        <td>
                                                            <h:panelGrid columns="2" style="margin-bottom:8px;font-family: Arial;font-size: 12px;" >
                                                                <p:selectOneRadio id="TipoRecAct" value="#{MBAdministacion.tipoAct}" >
                                                                    <f:selectItem itemLabel="Avaluo" itemValue="Avaluo"  itemDisabled="true" />
                                                                    <f:selectItem itemLabel="Cartera" itemValue="Cartera" />
                                                                </p:selectOneRadio>
                                                            </h:panelGrid>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <br/>                     
                                                <table>
                                                    <tr>
                                                        <c:choose>
                                                            <c:when test="#{MBAdministacion.tituloDialogActividad=='Registrar nueva actividad'}" >
                                                                <td> <p:commandButton  icon="ui-icon-disk" value="Guardar" action="#{MBActivRecor.regisActivid()}"   style="font-family: Arial;font-size: 13px;" 
                                                                                       update="InfAcciones,DialogActividadRealizada,                                                             
                                                                                       :contenedorGeneral:Contenedor:growl_General"/></td>
                                                            </c:when>
                                                            <c:otherwise>
                                                                <td><p:commandButton icon="ui-icon-disk" action="#{MBActivRecor.modifiActivida()}" value="Modificar" 
                                                                                     update=":contenedorGeneral:Contenedor:growl_General,DialogActividadRealizada,
                                                                                     InfAcciones"  style="font-family: Arial;font-size: 13px;"/> </td>
                                                            </c:otherwise>
                                                        </c:choose>
                                                    </tr>
                                                </table>  
                                            </center>

                                        </p:dialog>
                                    </p:outputPanel>

                                    <!--Crear/modificar un recordatorio-->
                                    <p:outputPanel style="font-family: Arial;font-size: 12px;" id="GestionRecordat">
                                        <p:dialog header="#{MBAdministacion.tituloDialogRecordat}" widgetVar="DlgRecordator"  height="auto" width="500" showEffect="fade" hideEffect="fade">
                                            <br/>
                                            <center>
                                                <table cellspacing="3" cellpadding="3">
                                                    <tr>
                                                        <td> <b><h:outputLabel styleClass="Texto" style="color: red;" value="Campos obligatorios (*)" /></b></td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="10"><p:separator style="font-family:Arial;font-size: 12px;" /></td>
                                                    </tr>
                                                    <tr>
                                                        <td> <h:outputText value="Tipo *"  style="font-family: Arial;font-size: 12px;" /></td>
                                                        <td>
                                                            <h:panelGrid columns="2" style="margin-bottom:8px;font-family: Arial;font-size: 12px;" >
                                                                <p:selectOneRadio id="TipoRecord" value="#{MBAdministacion.tipoRecord}">
                                                                    <f:selectItem itemLabel="Avaluo" itemValue="Avaluo"  itemDisabled="true"/>
                                                                    <f:selectItem itemLabel="Cartera" itemValue="Cartera" />
                                                                </p:selectOneRadio>
                                                            </h:panelGrid>
                                                        </td>
                                                    </tr>
                                                    <tr>                                                                
                                                        <td> <h:outputText value="Nombre: *"  style="font-family: Arial;font-size: 12px;" /></td>
                                                        <td><p:inputText id="txt_nombre_record" value="#{MBAdministacion.nombreRecordatori}" placeholder="Nombre"  style="font-family: Arial;font-size: 12px;"  onkeypress="return validarAlfaNumenicos(event)"/></td>
                                                    </tr>                          
                                                </table>
                                                <br/>                     
                                                <table>
                                                    <tr>
                                                        <c:choose>
                                                            <c:when test="#{MBAdministacion.tituloDialogRecordat == 'Registrar nuevo recordatorio'}" >
                                                                <td> <p:commandButton  icon="ui-icon-disk" value="Guardar" action="#{MBActivRecor.regisRecordator()}"   style="font-family: Arial;font-size: 13px;" 
                                                                                       update="InfRecordat,DialogActividadRealizada                                                        
                                                                                       :contenedorGeneral:Contenedor:growl_General"/></td>
                                                            </c:when>
                                                            <c:otherwise>
                                                                <td><p:commandButton icon="ui-icon-disk" action="#{MBActivRecor.modifiRecordator()}" value="Modificar" 
                                                                                     update=":contenedorGeneral:Contenedor:growl_General,
                                                                                     InfRecordat,DialogActividadRealizada"  style="font-family: Arial;font-size: 13px;"/> </td>
                                                            </c:otherwise>
                                                        </c:choose>
                                                    </tr>
                                                </table>  
                                            </center>

                                        </p:dialog>
                                    </p:outputPanel>
                                </p:tab>
                            </p:tabView>
                        </td>
                    </tr>
                </table>
            </center>

            <p:outputPanel autoUpdate="true" >
                <p:dialog widgetVar="juridico" header="Enviar a Cobro Juridico" minHeight="100" resizable="true" width="557px" height="252px">
                    <br/> 
                    <center>
                        <table style="font-family: Arial;font-size: 12px;">
                            <c:choose>
                                <c:when test="#{MBCartera.selectPendiXCobrar.size()>0}">
                                    <table style="font-family: Arial;font-size: 12px;">
                                        <!-- Informacion de Avaluos Seleccionados -->
                                        <tr>
                                            <td><center><b><p:outputLabel value="Seleccione los avaluos que desea enviar a Cobro Juridico" style=" font-family: Arial;font-size: 12px ;"/></b></center></td>
                                        </tr>
                                    </table>
                                    <center>
                                        <h:panelGrid rendered="#{MBCartera.selectPendiXCobrar.size() != 0}"> 
                                            <p:dataTable  id="Jurid" var="CJFact" value="#{MBCartera.selectPendiXCobrar}" style=" font-family: Arial;font-size:8px ;width: 400px"  
                                                          rowKey="#{CJFact.codFactura}" selection="#{MBCartera.selectCJuridico}" scrollable="true" scrollHeight="50"
                                                          emptyMessage="No se encuentras facturas en Impresion asociadas al cliente">
                                                <p:column selectionMode="multiple" style="font-family: Arial;font-size: 12px ;width:20px;"/> 
                                                <p:column headerText="Factura" style="font-family: Arial;font-size: 12px ;width:40px;" >
                                                    <h:outputText value="#{CJFact.codFactura}" />
                                                </p:column>
                                                <p:column headerText="Valor" style="font-family: Arial;font-size: 12px ;width:70px;" >
                                                    <h:outputText style=" float:  right"  value="#{CJFact.valorFactura}" >
                                                        <f:convertNumber currencySymbol="$" type="currency"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Observaciones"  style="font-family: Arial;font-size: 12px ;width: 120px;" >
                                                    <h:outputText value="#{CJFact.observacion}" />
                                                </p:column>
                                            </p:dataTable> 
                                        </h:panelGrid>
                                    </center>
                                    <center>
                                        <h:panelGrid rendered="#{MBCartera.selectPendiXCobrar.size() == 0}" columns="3" cellpadding="10">                                                                       
                                            <h:outputText  style="font-family:cursive; font-size: 13px; color: red" value="No se ha seleccionado ninguna factura"  />
                                        </h:panelGrid>
                                    </center>
                                </c:when>
                            </c:choose>
                            <tr>
                                <td><center><p:spacer height="11"/></center></td>
                            </tr>
                            <tr>     
                                <td><center> <p:inputTextarea style=" width: 350px" placeholder="Ingrese observación"  value="#{MBCartera.pasarJuridicoObser}"/></center></td>
                            </tr>        
                            <tr>
                                <td><center><p:spacer height="9"/></center></td>
                            </tr>
                            <tr>     
                                <td>
                                    <center> 
                                        <p:commandButton  icon="ui-icon-check" value="Aceptar"    style="font-size: 13px;font-family: Arial;"   update=":contenedorGeneral:Contenedor:growl_General"
                                                          action="#{MBCartera.GestionCartera('OperCobroJurd')}" />         
                                    </center>         
                                </td>
                            </tr>  
                        </table>
                        <table style="font-family: Arial;font-size: 12px;">
                        </table>
                    </center>
                </p:dialog>
            </p:outputPanel>

            <p:outputPanel id="PnlCastiga" >
                <p:dialog widgetVar="CastigaCartera" header="Castigar Cartera"  width="557px" height="252px">
                    <center>
                        <table style="font-family: Arial;font-size: 12px;">
                            <!-- Informacion de Avaluos Seleccionados -->
                            <tr>
                                <td><b><center><p:outputLabel value="Seleccione los avaluos que desea enviar a Castigo de Cartera" style=" font-family: Arial;font-size:12px ;"/></center></b></td>
                                <br/>
                            </tr>
                        </table>
                        <h:panelGrid rendered="#{MBCartera.selectPendiXCobrar.size() != 0}"> 
                            <p:dataTable  id="CastCart" var="CFact" value="#{MBCartera.selectPendiXCobrar}" style=" font-family: Arial;font-size:8px ;width: 400px"  
                                          rowKey="#{CFact.codFactura}" selection="#{MBCartera.selectCCartera}" scrollable="true" scrollHeight="52"
                                          emptyMessage="No se encuentras facturas en Impresion asociadas al cliente">
                                <p:column selectionMode="multiple" style="font-family: Arial;font-size: 12px ;width:20px;"/> 
                                <p:column headerText="Factura" style="font-family: Arial;font-size: 12px ;width:40px;" >
                                    <h:outputText value="#{CFact.codFactura}" />
                                </p:column>
                                <p:column headerText="Valor" style="font-family: Arial;font-size: 12px ;width:70px;" >
                                    <h:outputText style=" float:  right"  value="#{CFact.valorFactura}" >
                                        <f:convertNumber currencySymbol="$" type="currency"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Observaciones"  style="font-family: Arial;font-size: 12px ;width:120px;" >
                                    <h:outputText value="#{CFact.observacion}" />
                                </p:column>
                            </p:dataTable> 
                        </h:panelGrid>
                        <tr>
                            <td><center><p:spacer height="11"/></center></td>
                        </tr>
                        <tr>     
                            <td><center> <p:inputTextarea style=" width:350px" placeholder="Ingrese observación"  value="#{MBCartera.pasarCCastigada}"/></center></td>
                        </tr>        
                        <tr>
                            <td><center><p:spacer height="9"/></center></td>
                        </tr>
                        <tr>     
                            <td>
                                <center> 
                                    <p:commandButton  icon="ui-icon-check" value="Aceptar"    style="font-size: 13px;font-family: Arial;"   update=":contenedorGeneral:Contenedor:growl_General"
                                                      action="#{MBCartera.GestionCartera('OperCast')}" />         
                                </center>         
                            </td>
                        </tr>  

                    </center>
                    <br/>
                </p:dialog>
            </p:outputPanel>
            <!-- Dialog para Gestion de Notas Credito -->
            <p:dialog header="Gestion Notas Credito" widgetVar="notaCredito" modal="false" height="324px" width="565px" showEffect="fade"  hideEffect="explode" resizable="true">
                <p:tabView  id="TabNotaCre" effect="fade" effectDuration="fast" cache="true"  style="width: auto;font-family: Arial;font-size: 12px;border-radius: 5px;"  widgetVar="TabNotaCre" >
                    <p:tab title="Informacion General"    >
                        <p:outputPanel id="InfoNotaCre" >
                            <center>
                                <table style="width: 100%;font-family: Arial;font-size: 13px;position: relative;">
                                    <tr><td>
                                            <p:separator />
                                        </td></tr>
                                    <br/>
                                </table>
                                <table  style="font-family: Arial;font-size: 12px;" cellspacing="4" cellpdding="4">
                                    <!-- Carga el combobox con los numeros de facturas-->
                                    <p:outputPanel id="PagoFact">
                                        <c:choose>
                                            <c:when test="#{MBCartera.selectPendiXCobrar.size()>0}">
                                                <tr>
                                                    <td>
                                                        <b><h:outputText value="Factura:"  style="font-family: Arial;font-size: 12px;"  />  </b>      
                                                    </td>
                                                    <td>
                                                        <p:selectOneMenu  id="IdFacr" style="width:95px;font-size: 12px;"  value="#{MBCartera.selectFact}" >
                                                            <p:ajax listener="#{MBCartera.NotaCreditoGes('InfoNotaCred')}" update="ValorAdcNota" />
                                                            <f:selectItem id="Fact" itemValue="0" itemLabel="Seleccione" noSelectionOption="true" />
                                                            <f:selectItems id="SelectFact"  value="#{MBCartera.cargarFacturas}" />
                                                        </p:selectOneMenu>                                                           
                                                    </td>
                                                </tr>
                                            </c:when>
                                        </c:choose>
                                    </p:outputPanel>
                                    <!-- Fin del combobox-->
                                    <tr>
                                        <td>
                                            <b><h:outputText value="Valor:"  style="font-family: Arial;font-size: 12px; " /></b>
                                        </td>
                                        <td>
                                            <p:inputText id="valorNotaCre" title="Valor Nota Credito" value="#{MBCartera.valorRegnotaCre}" style="font-size: 12px;font-family: Arial;width:150px"  onkeypress="return validarnumeros(event);" placeholder="Valor Descuento"  onkeyup="formatoNum(this)">
                                                <f:convertNumber locale="en_US"/>
                                            </p:inputText>
                                            <td>
                                                <p:selectOneMenu value="#{MBCartera.tipoPorFijo}"   style="width:90px;font-size: 12px;" >
                                                    <f:selectItem itemLabel="Tipo" itemValue="0" noSelectionOption="true" />
                                                    <f:selectItem itemLabel="Porcentaje" itemValue="P" />
                                                    <f:selectItem itemLabel="Valor fijo" itemValue="F" />
                                                </p:selectOneMenu>
                                            </td>
                                        </td>
                                    </tr>
                                </table>
                                <table  style="font-family: Arial;font-size: 12px;"  cellspacing="4" cellpdding="4">
                                    <tr>
                                        <td>
                                            <br/>
                                            <p:inputTextarea value="#{MBCartera.observNotaCre}" style="font-size: 12px;font-family: Arial;width: 300px;height: 60px;" placeholder="Ingrese observaciones" />     
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <p:commandButton  icon="ui-icon-copy"  value="Agregar" update=":contenedorGeneral:Contenedor:growl_General,InfoNotaCre"   style="font-size: 13px;font-family: Arial;" action="#{MBCartera.agregarValAdicional()}"/>
                                        </td>
                                    </tr>
                                </table>
                                <br/>
                                <br/>
                            </center>
                        </p:outputPanel>
                    </p:tab>
                    <p:tab title="Notas Credito a la Factura"  id="infoNotaFact">
                        <p:outputPanel autoUpdate="true">
                            <table>
                                <tr>
                                    <p:spacer height="5"/>
                                    <td colspan="9">
                                        <!--Informacion de las Notas Creditos Asociadas a la Factura -->
                                        <p:outputPanel id="CosulNotaCre" style="font-family: Arial;font-size: 12px;" autoUpdate="true" >
                                            <center>
                                                <br/>
                                                <p:dataTable value="#{MBCartera.listConsNotaCreFac}" var="ListaNota"   id="ValorAdcNota" emptyMessage="No hay registros de Notas Credito"  scrollable="true" scrollHeight="100" 
                                                             selection="#{MBCartera.carte}" selectionMode="single" rowKey="#{ListaNota.codNota}" style="font-family: Arial;font-size: 12px;width: 500px;">
                                                    <p:column headerText="#" style="font-family: Arial;font-size: 12px; width: 5px"  >
                                                        <h:outputText value="#{ListaNota.codNota}" />
                                                    </p:column>
                                                    <p:column headerText="Id_NotaCre" style="font-family: Arial;font-size: 12px; width: 20px"  rendered="false">
                                                        <h:outputText value="#{ListaNota.idNotaCre}" />
                                                    </p:column>
                                                    <p:column headerText="Valor" style="font-family: Arial;font-size: 12px; width: 50px" footerText="" >
                                                        <h:outputText  value="#{ListaNota.valNotaCre}" >
                                                            <f:convertNumber currencySymbol="$" type="currency"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Tipo" style="font-family: Arial;font-size: 12px; width: 20px" footerText="" >
                                                        <h:outputText  value="#{ListaNota.tipoFactura}" >
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Observaciones" style="font-family: Arial;font-size: 12px; width:120px;" footerText="" >
                                                        <h:outputText  value="#{ListaNota.observCobro}" >
                                                        </h:outputText>
                                                    </p:column>
                                                </p:dataTable>
                                                <br/>
                                            </center>
                                        </p:outputPanel>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p:commandButton  icon="ui-icon-close" value="Remover" update=":contenedorGeneral:Contenedor:growl_General"  action="#{MBCartera.GestionCartera('RemovNotaCre')}"   style="font-family: Arial;font-size: 12px;"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="5">
                                        <center><p:commandButton  icon="ui-icon-copy" actionListener ="#{MBCartera.GestionCartera('NotaCreInsert')}" value="Aceptar"  action="#{beanDireccionar.url_Menu_Cartera('SeguimientoFactura')}"
                                                                  update=":contenedorGeneral:Contenedor:growl_General" id="BtnAceptar" ajax="true"
                                                                  style="font-family: Arial;font-size: 13px;" /></center>
                                    </td>
                                </tr>
                            </table>
                        </p:outputPanel>
                    </p:tab>
                </p:tabView>
            </p:dialog>
            <!-- Fin Dialog para Gestion de Notas Credito -->
            <!-- Dialog de detalle de Notas Credito -->
            <p:dialog header="Notas Credito a la Factura" style="font-family: Arial; font-size: 12px" widgetVar="NotaCreFact" minHeight="100" resizable="false">
                <p:outputPanel id="InfoNota" autoUpdate="true">
                    <p:dataTable id="NotaCred" var="Nota"  scrollable="true" scrollHeight="100"  value="#{MBCartera.listNotaCre}" style=" width: 600px" emptyMessage="No ha realizado la busqueda">
                        <p:column headerText="Fecha" style="font-family: Arial;font-size: 12px ;width:20px;" >
                            <h:outputText value="#{Nota.fechaNota}"/>
                        </p:column>
                        <p:column headerText="Valor"   style="font-family: Arial;font-size: 12px ;width:15px;" >
                            <h:outputText value="#{Nota.valorFactura}">
                                <f:convertNumber currencySymbol="$" type="currency"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Tipo Pago" style="font-family: Arial;font-size: 12px ;width:15px;" >
                            <h:outputText value="#{Nota.valorFactura}"/>
                        </p:column>
                        <p:column headerText="Registro por" style="font-family: Arial;font-size: 12px ;width:30px;" >
                            <h:outputText value="#{Nota.nombreEntidad}"/>
                        </p:column>
                    </p:dataTable> 
                </p:outputPanel>
            </p:dialog>
            <!--Fin detalle de Notas Credito-->
            <!--Informacion de los abonos  agregados al numero de factura seleccionado-->
            <p:dialog header="Abonos a la Factura" style="font-family: Arial; font-size: 12px" widgetVar="AbonoFact" minHeight="100" resizable="false">
                <p:outputPanel id="InfoAbono" autoUpdate="true">
                    <p:dataTable id="AbonoFact" var="Abno"  scrollable="true" scrollHeight="100"  value="#{MBCartera.listNotaAbonos}" style=" width: 600px" emptyMessage="No ha realizado la busqueda">
                        <p:column headerText="Factura" style="font-family: Arial;font-size: 12px ;width:10px;" >
                            <h:outputText value="#{Abno.codFactura}"/>
                        </p:column>
                        <p:column headerText="N° Avaluo" style="font-family: Arial;font-size: 12px ;width:10px;"  rendered="false">
                            <h:outputText value="#{Abno.codAval}"/>
                        </p:column>
                        <p:column headerText="Fecha" style="font-family: Arial;font-size: 12px ;width:35px;" >
                            <h:outputText value="#{Abno.fechaNota}"/>
                        </p:column>
                        <p:column headerText="Valor Pago" style="font-family: Arial;font-size: 12px ;width:20px;" >
                            <h:outputText value="#{Abno.valorFactura}">
                                <f:convertNumber currencySymbol="$" type="currency"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Recibo" style="font-family: Arial;font-size: 12px ;width:10px;" >
                            <h:outputText value="#{Abno.nombreEntidad}"/>
                        </p:column>
                        <p:column headerText="Responsable" style="font-family: Arial;font-size: 12px ;width:100px;" >
                            <h:outputText value="#{Abno.realizadoPor}"/>
                        </p:column>
                    </p:dataTable> 
                </p:outputPanel>
            </p:dialog>
            <!--Fin detalle de los abonos-->
            <!--Informacion del cambio de impuesto a la factura-->
            <p:dialog id="FormCaImp" header="Cambio de Impuesto" style="font-family: Arial; font-size: 12px" widgetVar="CambioImps" minHeight="100" resizable="true"  height="622px" width="557px"  closable="false">

                <p:outputPanel id="InfoCmbImp" autoUpdate="true">
                    <center>
                        <table style="width: 100%;font-family: Arial;font-size: 13px;position: relative;">
                            <tr>    
                                <td><p:outputLabel value="» Informacion General" style="font-weight: bold;"/></td>
                            </tr>
                            <tr><td>
                                    <p:separator />
                                </td></tr>
                        </table>
                        <table  style="font-family: Arial;font-size: 12px;" cellspacing="4" cellpdding="20">
                            <!-- Carga el combobox con los numeros de facturas-->
                            <tr>
                                <td>
                                    <b><h:outputText value="Factura:"  style="font-family: Arial;font-size: 12px;" />  </b>      
                                </td>
                                <td>
                                    <p:selectOneMenu  id="IdFactSel" style="width:120px;font-size: 12px;"  value="#{MBCartera.cambImps}"  disabled="#{MBCartera.estdCmb}" >
                                        <p:ajax listener="#{MBCartera.GestionCartera('MostrarFact')}" update="ConsulImps" />
                                        <f:selectItem itemLabel="--Seleccione--" itemValue="0"  />
                                        <f:selectItems id="SelectFac" value="#{MBCartera.cargarFacturas}" />
                                    </p:selectOneMenu>                                                           
                                </td>
                            </tr>
                            <!-- Fin del combobox-->
                            <td>
                                <b><h:outputText value="Impuesto:"  style="font-family: Arial;font-size: 12px; "  /></b>
                                <td>
                                    <p:selectOneMenu  id="IdImps" style="width:120px;font-size: 12px;"  value="#{MBCartera.selectImps}"  disabled="#{MBCartera.estdCmb}"  rendered="#{MBCartera.nameImpsto==false}"   >
                                        <p:ajax listener="#{MBCartera.cargTasa()}" update="IdTasa" />
                                        <f:selectItem id="ImpsFact" itemValue="0" itemLabel="Seleccione" noSelectionOption="true"  />
                                        <f:selectItems id="SelectImps"  value="#{MBCartera.listImpsFact}" />
                                    </p:selectOneMenu>   
                                    <h:outputText id="Impuesto" value="#{MBCartera.nombreImpuesto}" style="font-size: 12px;font-family: Arial;"    rendered="#{MBCartera.nameImpsto==true}">
                                    </h:outputText>
                                </td>
                            </td>

                            <tr>
                                <td>
                                    <b><h:outputText value="Tasa Impuesto:"  style="font-family: Arial;font-size: 12px; " /></b>
                                    <td>
                                        <p:selectOneMenu  id="IdTasa" style="width:120px;font-size: 12px;"  value="#{MBCartera.selectTasa}"  >
                                            <f:selectItem id="ImpsTasa" itemValue="0" itemLabel="Seleccione" noSelectionOption="true"  />
                                            <f:selectItems id="SlctTasaImp"  value="#{MBCartera.listImpsTasa}"  />
                                        </p:selectOneMenu>                                                           
                                    </td>
                                </td>
                            </tr>
                            <br/>
                        </table>
                        <table>
                            <tr>
                                <td colspan="1">
                                    <b><p:outputLabel style="font-size: 12px;font-family: Arial;" value="Tasa de Bomberos"/></b>
                                </td>
                                <td>
                                    <p:selectBooleanCheckbox   value="#{MBCartera.estTasaBmberos}"  style="font-weight: bold;">
                                        <p:ajax event="change"   />
                                    </p:selectBooleanCheckbox>
                                </td>
                                <c:choose>
                                    <c:when test="#{MBCartera.estTasaBmberos}">
                                        <td>
                                            <p:inputText id="valorNotaCre" title="Valor Nota Credito" value="#{MBCartera.valorRegnotaCre}" style="font-size: 12px;font-family: Arial;width:50px"  onkeypress="return validarnumeros(event);" placeholder="Valor Descuento"  onkeyup="formatoNum(this)">
                                                <f:convertNumber locale="en_US"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:selectOneRadio id="console" style="font-family: Arial;font-size: 12px; ">
                                                <f:selectItem itemLabel="Fijo" itemValue="F" />
                                                <f:selectItem itemLabel="%" itemValue="P" />
                                            </p:selectOneRadio>
                                        </td>
                                    </c:when>
                                </c:choose>
                            </tr>
                        </table>
                        <table  style="font-family: Arial;font-size: 12px;"  cellspacing="4" cellpdding="4">
                            <tr>
                                <td>
                                    <p:inputTextarea  value ="#{MBCartera.observCamImp}" style="font-size: 12px;font-family: Arial;width: 268px;height: 80px;" placeholder="Ingrese observaciones" />     
                                </td>
                            </tr>
                        </table>
                        <table>
                            <tr>
                                <td>
                                    <p:commandButton  icon="ui-icon-copy"  value="#{MBCartera.lbel}" update=":contenedorGeneral:Contenedor:growl_General,InfoCmbImp,ConsulImps"   style="font-size: 13px;font-family: Arial;" actionListener="#{MBCartera.CambioImps('addImps')}"  action="#{MBCartera.GestionCartera('InfoImpst')}"  ajax="true"/>
                                </td>
                                <td>
                                    <p:commandButton  icon="ui-icon-copy"  value="Cancelar" update=":contenedorGeneral:Contenedor:growl_General,InfoCmbImp"   style="font-size: 13px;font-family: Arial;" action="#{MBCartera.cancelMod('1')}"  rendered="#{MBCartera.estdCmb}"/>
                                </td>
                            </tr>
                        </table>

                    </center>
                </p:outputPanel>
                <p:outputPanel id="ConsulImps" style="font-family: Arial;font-size: 12px;" autoUpdate="true">
                    <p:tabView  id="TabImpst" effect="fade" effectDuration="fast" cache="true" style="width: auto;font-family: Arial;font-size: 12px;border-radius: 5px;"  widgetVar="TabImpst" >
                        <p:tab title="Informacion Impuestos"  id="infoImpFact" >
                            <table>
                                <td>
                                    <td style="width: 550px;"><p:outputLabel value="Impuestos aplicados a la factura. (Aqui puede realizar cualquier cambio necesario de los impuestos ya aplicados)." style="font-weight: normal; font-size:  12px; width: 5px"/></td>
                                    <table>
                                        <tr>    
                                            <p:spacer height="5"/>
                                            <td colspan="9">
                                                <!--Informacion de las Notas Creditos Asociadas a la Factura -->
                                                <br/>
                                                <p:dataTable value="#{MBCartera.listCamImpst}" var="ListRegsImp" id="ValorAdcImps" scrollable="true" scrollRows="5"
                                                             selection="#{MBCartera.modImp}" selectionMode="single"   rowKey="#{ListRegsImp.codImp}"  scrollHeight="70"
                                                             emptyMessage="No hay regristros de nuevos Impuestos"  
                                                             style="font-family: Arial;font-size: 12px;width: 500px;">
                                                   <!-- <p:ajax event="rowSelect" listener="#{MBCartera.onRowSelect}" update=":contenedorGeneral:Contenedor:growl_General" /> -->
                                                    <p:column headerText="N" style="font-family: Arial;font-size: 12px; width: 10px;"  >
                                                        <h:outputText value="#{ListRegsImp.codNota}" />
                                                    </p:column>
                                                    <p:column headerText="Codigo" style="font-family: Arial;font-size: 12px;" rendered="false" >
                                                        <h:outputText value="#{ListRegsImp.codImp}" />
                                                    </p:column>
                                                    <p:column headerText="Factura" style="font-family: Arial;font-size: 12px; width: 10px;" >
                                                        <h:outputText value="#{ListRegsImp.codFactura}" />
                                                    </p:column>
                                                    <p:column headerText="Avaluo" style="font-family: Arial;font-size: 12px; width: 10px;" >
                                                        <h:outputText value="#{ListRegsImp.codAval}" />
                                                    </p:column>
                                                    <p:column headerText="Impuesto" style="font-family: Arial;font-size: 12px; width: 80px;" >
                                                        <h:outputText value="#{ListRegsImp.nombreImpuesto}" />
                                                    </p:column>
                                                    <p:column headerText="Tasa" style="font-family: Arial;font-size: 12px; width: 30px;" >
                                                        <h:outputText value="#{ListRegsImp.tasaImpuesto} %" />
                                                    </p:column>
                                                    <!-- 
                                                    <p:column style="width:10px;text-align: center" >
                                                        <p:commandButton update=":contenedorGeneral:Contenedor:growl_General"    actionListener="#{MBCartera.abrir()}" icon="ui-icon-search" title="View" style="font-size: 13px;font-family: Arial;width: 10px; height: 10px;" >
                                                            <f:setPropertyActionListener value="#{ListRegsImp}" target="#{MBCartera.modImp}" />
                                                        </p:commandButton>
                                                    </p:column>
                                                    -->
                                                </p:dataTable>
                                                <br/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <tr>
                                    <td>
                                        <p:commandButton  icon="ui-icon-close" value="Remover" update=":contenedorGeneral:Contenedor:growl_General"  action="#{MBCartera.CambioImps('eliminar')}"
                                                          style="font-family: Arial;font-size: 12px;" ajax="true"/>
                                    </td>
                                </tr>
                                <br/>
                                <br/>
                                <center>
                                    <tr>
                                        <td> 
                                            <p:commandButton icon="ui-icon-cart" value="Aplicar"  style="font-size: 13px;font-family: Arial;" actionListener="#{MBCartera.CambioImps('AplicarImps')}"  ajax="true"  
                                                             update=":contenedorGeneral:Contenedor:growl_General"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <p:commandButton icon="ui-icon-cart" value="Cerrar"  style="font-size: 13px;font-family: Arial;" actionListener="#{MBCartera.cancelMod('Cerrar')}"  ajax="true"  
                                                             update=":contenedorGeneral:Contenedor:growl_General"/>
                                        </td>
                                    </tr>
                                </center>
                            </table>
                        </p:tab>
                    </p:tabView>
                </p:outputPanel>
            </p:dialog>
            <!--Fin detalle de los abonos-->


            <!-- Mostrar el detalle de las observaciones para cada una de lasfacturas seleccionadas para realizar el cobro!-->
            <p:outputPanel id="DetailObser" style="text-align:center;" autoUpdate="true">
                <p:dialog header="Detalle Observaciones" widgetVar="ObservFact" modal="false" showEffect="fade" hideEffect="fade" resizable="true" height="200px" width="800px">

                    <table style="font-family: Arial; font-size: 12px" >
                        <ui:repeat value="#{MBCartera.listaObservDetalle}" var="Observ" >
                            <tr>
                                <td><b><p:outputLabel   value="Fecha: " style="text-align: left" /></b>
                                    <p:outputLabel   value="#{Observ.fechaObservacion}" /></td>
                            </tr>
                            <tr>
                                <td><b><p:outputLabel   value="Observación: "   /></b>
                                    <p:outputLabel   value="#{Observ.observacion.toUpperCase()}" style="width: 150px" />
                                </td>
                            </tr>
                            <tr>
                                <td><b><p:outputLabel   value="Realizada por: " /></b>
                                    <b><p:outputLabel   value="#{Observ.realizadoPor}" /></b></td>
                            </tr>
                            <tr> 
                                <td colspan="6"><p:separator/></td>
                            </tr>
                        </ui:repeat>   
                    </table>
                </p:dialog>
            </p:outputPanel>

            <!-- Dialogo para modificacion del Ica -->
            <p:outputPanel id="PnlIcaCiudad">
                <p:dialog header="Impuestos por Avaluo" widgetVar="IcaCiudad" resizable="true" closable="true" modal="false" height="222px" width="517px" showEffect="fade" hideEffect="fade" style="font-size: 12px;font-family: Arial">
                    <c:choose>
                        <c:when test="#{MBCartera.listaCiudad.size()>0}">
                            <table style="font-family: Arial;font-size: 12px;">
                                <!-- Informacion de Avaluos Seleccionados -->
                                <tr>
                                    <td>   
                                        <br/>
                                        <center><b><p:outputLabel value="Realice la distribucion del ica por cada una de las ciudades" style=" font-family: Arial;font-size: 12px ;  "/></b></center></td>
                                </tr>
                            </table>
                            <table>
                                <tr>
                                    <td>
                                        <p:outputPanel id="pnlIca">
                                            <h:panelGrid rendered="#{MBCartera.listaCiudad.size() != 0}" > 
                                                <p:dataTable id="InfoIcaImpst" var="IcaRpt" value="#{MBCartera.listaCiudad}" editable="true" editMode="cell" widgetVar="cellCars2" >
                                                    <p:column headerText="Ciudad" style="font-family: Arial;font-size: 12px ;width:20px;" >
                                                        <h:outputText value="#{IcaRpt.ciudadAval}" />
                                                    </p:column>
                                                    <p:column headerText="Tipo" style="font-family: Arial;font-size: 12px ;width:20px;" >
                                                        <h:outputText value="Porcentaje" />
                                                    </p:column>
                                                    <p:column headerText="Ajuste Ica" style="font-family: Arial;font-size: 12px ;width:30px;">
                                                        <p:cellEditor>
                                                            <f:facet name="output"><h:outputText value="#{IcaRpt.icaAjusteMuncipio}"  style="font-family: Arial;font-size: 12px ;width:30px;"/></f:facet>
                                                            <f:facet name="input">
                                                                <p:selectOneMenu  id="IdIca" style="width:100px;font-size: 12px;"  value="#{IcaRpt.icaAjusteMuncipio}"  >
                                                                    <f:selectItem id="ImpsIca" itemValue="0" itemLabel="Seleccione" noSelectionOption="true"  />
                                                                    <f:selectItems id="SlctTasaIca"  value="#{MBCartera.listImpsIca}"  />
                                                                </p:selectOneMenu> 
                                                            </f:facet>
                                                        </p:cellEditor>
                                                    </p:column>
                                                    <p:column headerText="Total Ica" style="font-family: Arial;font-size: 12px ;width:20px;"  rendered="false">
                                                        <h:outputText value="#{IcaRpt.valorAjuste}" />
                                                    </p:column>
                                                </p:dataTable>
                                            </h:panelGrid>
                                            <center>
                                                <br/>
                                                <table>
                                                    <tr>
                                                        <td colspan="5">
                                                            <p:commandButton icon="ui-icon-wrench"  style="font-size: 13px;font-family: Arial;" value="Aplicar Impuesto Ica" actionListener="#{MBCartera.FactGrupoInfo('CalcularIca')}"    ajax="true" 
                                                                             update=":contenedorGeneral:Contenedor:growl_General,pnlIca,InfoIcaImpst"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </center>
                                        </p:outputPanel>
                                    </td>
                                </tr>
                            </table>
                        </c:when>
                        <c:otherwise>
                            <table style="font-family: Arial;font-size: 12px;">
                                <!-- Informacion de Avaluos Seleccionados -->
                                <tr>
                                    <td>   
                                        <br/>
                                        <center><b><p:outputLabel value="No se han aplicado Ica" style=" font-family: Arial;font-size: 12px ;  "/></b></center></td>
                                </tr>
                            </table>
                        </c:otherwise>
                    </c:choose>
                </p:dialog>
            </p:outputPanel>
            <!-- Dialogo que permite confirmar la infroamcion del cambio de Ica -->
            <p:dialog header="Confirmacion Ica" widgetVar="ConfirmIca" resizable="true" closable="false" modal="false" height="98px" width="607px" showEffect="fade" hideEffect="fade" style="font-size: 12px;font-family: Arial">
                <center>
                    <table border="0" >
                        <tr>
                            <td><b><center><p:outputLabel style="font-size: 14px;font-family: Arial" value="¿Esta seguro de aplicar los cambios?"/></center></b></td>
                        </tr>                 
                        <tr>
                            <td><p:outputLabel style="font-size: 12px;font-family: Arial" value="Tenga en cuenta que el Rete-Ica aplicado a la factura se elimina y se ajustara por avaluo."/></td>
                        </tr>    
                    </table>
                    <table cellspacing="3" cellpadding="3">
                        <tr>                           
                            <td>
                                <p:commandButton value="Aceptar" icon="ui-icon-check" styleClass="ui-confirmdialog-no"  actionListener ="#{beanDireccionar.url_Menu_Cartera('Confirmacion')}"    update = ":contenedorGeneral:Contenedor:growl_General"  action="#{beanDireccionar.url_Menu_Cartera('CargaIcaAvaluo')}" ajax="false" style="font-family:Arial;font-size: 13px;" >
                                </p:commandButton>
                            </td>
                            <td>
                                <p:commandButton value="Cancelar" icon="ui-icon-close" onclick="PF('ConfirmIca').hide()"  styleClass="ui-confirmdialog-no"  ajax="true" style="font-family:Arial;font-size: 13px;"/>
                            </td>
                        </tr>
                    </table>
                </center>
            </p:dialog>
            <!-- Mostrar el detalle de las observaciones para cada una de lasfacturas seleccionadas para realizar el cobro!-->
            <p:outputPanel id="DetalleAval" style="text-align:center;" autoUpdate="true">
                <p:dialog header="Informacion General por avaluo" widgetVar="DlgAval" modal="false" showEffect="fade" hideEffect="fade" resizable="true" height="185px" width="263px">
                    <p:tabView  id="TabDetAval" effect="fade" effectDuration="fast" cache="true"  style="width: auto;font-family: Arial;font-size: 12px;border-radius: 5px;"  widgetVar="TabDetAval" >
                        <p:tab title="Detalle de Impuestos"  >
                            <p:outputPanel  id="InfoValores" autoUpdate="true">
                                <table style="font-family: Arial; font-size: 12px" >
                                    <tr>    
                                        <td>
                                            <p:separator style="width:180px;" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <b><p:outputLabel   value="Valor Avaluo"  rendered="#{MBCartera.valorAvaluo!=0}" style="font-size: 12px;font-family: Arial;"/></b>
                                            <p:outputLabel style="float: right; font-size: 12px;font-family: Arial;" value="#{MBCartera.valorAvaluo}" rendered="#{MBCartera.valorAvaluo!=0}" >
                                                <f:convertNumber locale="en_US"/></p:outputLabel>
                                        </td>
                                    </tr>
                                    <tr>
                                        <!-- Iva -->
                                        <td colspan="2">
                                            <b><p:outputLabel   value="#{MBCartera.lblliva}"    rendered="#{MBCartera.iva!=0}"  style="font-size: 12px;font-family: Arial;"/></b>
                                            <p:outputLabel style="float: right; font-size: 12px;font-family: Arial;"  rendered="#{MBCartera.iva!=0}" value="#{MBCartera.iva}">
                                                <f:convertNumber locale="en_US"/></p:outputLabel>
                                        </td>
                                    </tr>
                                    <tr>
                                        <!-- Rtefuente -->
                                        <td colspan="2">
                                            <b><p:outputLabel   value="#{MBCartera.lblfuente}"  rendered="#{MBCartera.fuente!=0}" style="font-size: 12px;font-family: Arial;"/></b>
                                            <p:outputLabel style="float: right; font-size: 12px;font-family: Arial;" value="#{MBCartera.fuente}" rendered="#{MBCartera.fuente!=0}" >
                                                <f:convertNumber locale="en_US"/></p:outputLabel>
                                        </td>
                                    </tr>
                                    <tr>
                                        <!-- RtIca por Avaluo -->
                                        <td colspan="2">
                                            <b><p:outputLabel  value="#{MBCartera.lblIcaAval}"  style="font-size: 12px;font-family: Arial;" rendered="#{MBCartera.icaAval!=0}"/></b>
                                            <p:outputLabel style="float: right; font-size: 12px;font-family: Arial;" value="#{MBCartera.icaAval}"  rendered="#{MBCartera.icaAval!=0}">
                                                <f:convertNumber locale="en_US"/></p:outputLabel>
                                        </td>
                                    </tr>
                                    <tr>
                                        <!-- RtIva -->
                                        <td colspan="2">
                                            <b><p:outputLabel  value="#{MBCartera.lblreteIva}"  style="font-size: 12px;font-family: Arial;"  rendered="#{MBCartera.reteIva!=0}" /></b>
                                            <p:outputLabel style="float: right; font-size: 12px;font-family: Arial;" value="#{MBCartera.reteIva}" rendered="#{MBCartera.reteIva!=0}" >
                                                <f:convertNumber locale="en_US"/></p:outputLabel>
                                            <p:separator style="width:180px;" />
                                        </td>
                                    </tr>
                                </table>
                            </p:outputPanel>
                        </p:tab>
                    </p:tabView>
                </p:dialog>
            </p:outputPanel>
        </h:form>
    </h:body>
</html>